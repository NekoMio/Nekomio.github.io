<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="https://busuanzi.ibruce.info"><link rel="dns-prefetch" href="//cdn1.lncld.net"><link rel="dns-prefetch" href="//www.googletagmanager.com"><link rel="dns-prefetch" href="//www.google-analytics.com"><link rel="preload" href="https://cdn.jsdelivr.net/npm/busuanzi@2.3.0/bsz.pure.mini.js" as="script"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1,maximum-scale=5,viewport-fit=cover"><meta name="renderer" content="webkit"><title>POJ 2185 Milking Grid | NekoMio&#39;s Blog</title><link rel="icon" type="image&#x2F;ico" href="/null.webp"><link rel="stylesheet" href="/lib/spectre/spectre.min.css"><style>body{background-color:#f8f9fa}a,a:visited{color:#0070ff}a:active,a:focus,a:hover{color:#0070ff;opacity:.75}#post-content a,#post-content a:focus,#post-content a:hover,#post-content a:visited{color:#005eb9;opacity:1}.post-entry .card-body a{color:#0070ff}.avatar{background:#444}.navbar-link,.navbar-link:visited,.timeline .timeline-item .timeline-icon.icon-lg{color:#0070ff}.navbar-link:hover{color:#0070ff;opacity:.8}#disqus-loadmore-button,#disqus-switch-to-direct,#disqus_click_btn,#search-input .btn{background:#727e96;border-color:#727e96;color:#fff}#post-toc a.post-toc-link,#post-toc a.post-toc-link:visited,.share-menu.menu .menu-item>a{color:#727e96}.share-menu.menu .menu-item>a:focus,.share-menu.menu .menu-item>a:hover,.share-menu.menu .menu-item>a:visited{color:#50596c;background:#f8f9fa;opacity:.85}</style><link rel="stylesheet" href="/css/style.min.css"><link rel="preload" href="/css/highlight/github.min.css" as="style" onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel="stylesheet" href="/css/highlight/github.min.css"></noscript><script>!function(n){"use strict";n.loadCSS||(n.loadCSS=function(){});var t,o=loadCSS.relpreload={};o.support=function(){var e;try{e=n.document.createElement("link").relList.supports("preload")}catch(t){e=!1}return function(){return e}}(),o.bindMediaToggle=function(t){var e=t.media||"all";function a(){t.addEventListener?t.removeEventListener("load",a):t.attachEvent&&t.detachEvent("onload",a),t.setAttribute("onload",null),t.media=e}t.addEventListener?t.addEventListener("load",a):t.attachEvent&&t.attachEvent("onload",a),setTimeout(function(){t.rel="stylesheet",t.media="only x"}),setTimeout(a,3e3)},o.poly=function(){if(!o.support())for(var t=n.document.getElementsByTagName("link"),e=0;e<t.length;e++){var a=t[e];"preload"!==a.rel||"style"!==a.getAttribute("as")||a.getAttribute("data-loadcss")||(a.setAttribute("data-loadcss",!0),o.bindMediaToggle(a))}},o.support()||(o.poly(),t=n.setInterval(o.poly,500),n.addEventListener?n.addEventListener("load",function(){o.poly(),n.clearInterval(t)}):n.attachEvent&&n.attachEvent("onload",function(){o.poly(),n.clearInterval(t)})),"undefined"!=typeof exports?exports.loadCSS=loadCSS:n.loadCSS=loadCSS}("undefined"!=typeof global?global:this)</script><link rel="alternate" type="application/rss+xml" href="/rss2.xml"><meta name="mobile-web-app-capable" content="yes"><meta name="application-name" content="NekoMio's Blog"><meta name="msapplication-starturl" content="https://www.nekomio.com"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="NekoMio's Blog"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta property="og:title" content="POJ 2185 Milking Grid | NekoMio&#39;s Blog"><meta property="og:site_name" content="NekoMio&#39;s Blog"><meta property="og:type" content="article"><meta property="og:url" content="https://www.nekomio.com/2017/07/03/26/"><meta property="og:locale" content="zh-CN"><meta name="description" content="DescriptionEvery morning when they are milked, the Farmer John’s cows form a rectangular grid that is R (1 &amp;lt;&#x3D; R &amp;lt;&#x3D; 10,000) rows by C (1 &amp;lt;&#x3D; C &amp;lt;&#x3D; 75) columns. As we all know, Farmer John is  - NekoMio - NekoMio&#39;s Blog"><meta name="keywords" content="KMP"><meta property="article:published_time" content="2017-07-03T08:12:51.000Z"><meta property="article:modified_time" content="2023-06-09T07:12:53.158Z"><meta property="og:updated_time" content="2023-06-09T07:12:53.158Z"><meta property="article:author" content="NekoMio"><meta property="article:tag" content="KMP"><meta name="twitter:card" content="summary"><link rel="canonical" href="https://www.nekomio.com/2017/07/03/26/"><meta name="generator" content="Hexo 5.4.2"><script async src="https://www.googletagmanager.com/gtag/js?id=G-T9TWLDVQ6L"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-T9TWLDVQ6L")</script><script type="application/ld+json">{
    "@context": "http://schema.org",
    "url": "https://www.nekomio.com/2017/07/03/26/",
    "@type": "BlogPosting",
    "logo": "https://www.nekomio.com/null.webp",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https://www.nekomio.com/2017/07/03/26/"
    },
    "headline": "POJ 2185 Milking Grid | NekoMio&#39;s Blog",
    
    "image": {
        "@type": "ImageObject",
        "url": "https://www.nekomio.com/null.webp"
    },
    
    "datePublished": "2017-07-03T08:12:51.000Z",
    "dateModified": "2023-06-09T07:12:53.158Z",
    "author": {
        "@type": "Person",
        "name": "NekoMio",
        "image": {
            "@type": "ImageObject",
            "url": "https://www.nekomio.com/null.webp"
        },
        "description": "美しいものが起こることを常に信じている"
    },
    "publisher": {
        "@type": "Organization",
        "name": "NekoMio&#39;s Blog",
        "logo": {
            "@type": "ImageObject",
            "url": "https://www.nekomio.com/null.webp"
        }
    },
    
    "potentialAction": {
        "@type": "SearchAction",
        "target": "https://www.nekomio.com/search.html?s={search_term_string}",
        "query-input": "required name=search_term_string"
    },
    
    "keywords": "KMP",
    "description": "DescriptionEvery morning when they are milked, the Farmer John’s cows form a rectangular grid that is R (1 &amp;amp;lt;= R &amp;amp;lt;= 10,000) rows by C (1 &amp;amp;lt;= C &amp;amp;lt;= 75) columns. As we all know, Farmer John is  - NekoMio - NekoMio&#39;s Blog"
}</script><link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/KaTeX/0.16.0/katex.min.css" integrity="sha384-Xi8rHCmBmhbuyyhbI88391ZKP2dmfnOl4rT9ZfRI7mLTdk1wblIUnrIq35nqwEvC" crossorigin="anonymous"><script>window.WebFontConfig={custom:{families:["KaTeX_AMS","KaTeX_Caligraphic:n4,n7","KaTeX_Fraktur:n4,n7","KaTeX_Main:n4,n7,i4,i7","KaTeX_Math:i4,i7","KaTeX_Script","KaTeX_SansSerif:n4,n7,i4","KaTeX_Size1","KaTeX_Size2","KaTeX_Size3","KaTeX_Size4","KaTeX_Typewriter"]}}</script><script defer src="https://cdn.bootcdn.net/ajax/libs/webfont/1.6.28/webfontloader.js"></script><style>::-webkit-scrollbar{width:5px;height:8px;background-color:#b9b9b9}::-webkit-scrollbar-track{border-radius:10px;background-color:#b9b9b9}::-webkit-scrollbar-thumb{border-radius:10px;background-color:#ffb6b9}</style><style>html:not([stylus-iframe]) body:before{content:"";position:fixed;top:0;right:0;bottom:0;left:0;z-index:-100;background-image:url(https://file.nekomio.com/img/bg.webp);background-position:center bottom;background-size:cover;background-attachment:fixed;background-repeat:no-repeat}@media screen and (max-width:1650px){html:not([stylus-iframe]) body:before{background-image:url(https://file.nekomio.com/img/bg_small.webp)}}</style></head><body><header><h1 class="header-title text-center"><a href="/">NekoMio&#39;s Blog</a></h1><p class="text-center header-slogan">美しいものが起こることを常に信じている</p><nav class="navbar-section text-center"><a href="/" class="navbar-link">首页</a> <a href="/archives/" class="navbar-link">归档</a> <a href="/search.html" class="navbar-link">搜索</a> <a href="/links.html" class="navbar-link">Friends</a><div class="dropdown dropdown-right"><a class="navbar-link dropdown-toggle" tabindex="0">分享</a><ul class="menu share-menu"><li class="menu-item"><a href="http://service.weibo.com/share/share.php?appkey=&title=NekoMio's Blog&url=https://www.nekomio.com&pic=https://www.nekomio.com/null.webp&searchPic=false&style=simple" target="_blank" rel="external noopener noreferrer nofollow">分享到微博</a></li><li class="menu-item"><a href="https://twitter.com/intent/tweet?text=NekoMio's Blog&url=https://www.nekomio.com&via=NekoMio" target="_blank" rel="external noopener noreferrer nofollow">分享到 Twitter</a></li><li class="menu-item"><a href="https://www.facebook.com/sharer/sharer.php?u=https://www.nekomio.com" target="_blank" rel="external noopener noreferrer nofollow">分享到 Facebook</a></li><li class="menu-item"><a href="https://plus.google.com/share?url=https://www.nekomio.com" target="_blank" rel="external noopener noreferrer nofollow">分享到 Google+</a></li><li class="menu-item"><a href="https://www.linkedin.com/shareArticle?mini=true&url=https://www.nekomio.com&title=POJ 2185 Milking Grid" target="_blank" rel="external noopener noreferrer nofollow">分享到 LinkedIn</a></li><li class="menu-item"><a href="http://connect.qq.com/widget/shareqq/index.html?site=NekoMio's Blog&title=POJ 2185 Milking Grid&summary=NekoMio 的博客 爱这个世界&pics=https://www.nekomio.com/null.webp&url=https://www.nekomio.com" target="_blank" rel="external noopener noreferrer nofollow">分享到 QQ</a></li><li class="menu-item"><a href="https://t.me/share/url?url=https://www.nekomio.com&text=POJ 2185 Milking Grid" target="_blank" rel="external noopener noreferrer nofollow">分享到 Telegram</a></li><li class="menu-item"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIQAAACECAAAAAB0L9x7AAABfklEQVR42u3ayw7DMAhE0fz/T7ebbloZGJCVjKubTdRXfCpZgLGvl8F1gQAB4gjElVxfP/i8/r2vnqE+F4QvYjlpfgbJBsyw6XNBWCNWE2v1eRp8gt+v3gdxNiIKOGkgAvHXiGqCRkAQZyOyRDSdkNuyKIjbEVVAmt63VdsgbkWUi9Zi4kUF8dZVOYhbEbsCUJXUlgslELYIdXGrYpRmCwhfRFbIqI2yarBWxATxOKJqgkSDdyZlNKFB+CN2FLJqggNxHqIKXt1gJzfYQTyOiL6YNcGyjZnqT4RZFIQNIhtIaZxnyS1Dg/BFVJhuIVMFLxD+iKh5nk2uXcUuCF9EtOFebbYqm7nZAhmEP6KzOad8t51FQVghOsWI2kgrCyQQlghlI65KXOpCCsQZCPWgsNJcVQ72lIUuCAvEJFkpQa4MgiCsEdNmmXoQrH1qAIQ1YtI0kxZEII5FdBvwalIE4Y2YLm6mB0FAeCNGBzCqQ8DTA4AgHkc8eYEAAcIa8QYYs1nZH/LGaQAAAABJRU5ErkJggg==" alr="QRCode"></li></ul></div></nav></header><div class="post-container"><div id="post-card" class="card"><div class="card-item-container"><div class="card-inner-cell"><div class="card-header"><h1 class="card-title h3 mb-2">POJ 2185 Milking Grid</h1><div class="post-header-info"><p class="post-header-info-left text-gray"><img class="author-thumb lazyload" data-src="/null.webp" src="/img/suka-lazyload.gif" alt="NekoMio's Avatar"> <span>2017-07-03</span> <span class="suka-devide-dot"></span> <a class="category-link" href="/categories/%E9%A2%98%E8%A7%A3/">题解</a><span id="busuanzi_container_page_pv" hidden><span class="suka-devide-dot"></span> <span></span> <span id="busuanzi_value_page_pv"></span> <span>Views</span></span></p><div class="post-header-info-right"><div class="dropdown dropdown-right"><a class="dropdown-toggle" tabindex="0">分享本文</a><ul class="menu share-menu"><li class="menu-item"><a href="http://service.weibo.com/share/share.php?appkey=&title=POJ 2185 Milking Grid&url=https://www.nekomio.com/2017/07/03/26/&pic=https://www.nekomio.com/null.webp&searchPic=false&style=simple" target="_blank" rel="external noopener noreferrer nofollow">分享到微博</a></li><li class="menu-item"><a href="https://twitter.com/intent/tweet?text=POJ 2185 Milking Grid&url=https://www.nekomio.com/2017/07/03/26/&via=NekoMio" target="_blank" rel="external noopener noreferrer nofollow">分享到 Twitter</a></li><li class="menu-item"><a href="https://www.facebook.com/sharer/sharer.php?u=https://www.nekomio.com/2017/07/03/26/" target="_blank" rel="external noopener noreferrer nofollow">分享到 Facebook</a></li><li class="menu-item"><a href="https://plus.google.com/share?url=https://www.nekomio.com/2017/07/03/26/" target="_blank" rel="external noopener noreferrer nofollow">分享到 Google+</a></li><li class="menu-item"><a href="https://www.linkedin.com/shareArticle?mini=true&url=https://www.nekomio.com/2017/07/03/26/&title=NekoMio's Blog" target="_blank" rel="external noopener noreferrer nofollow">分享到 LinkedIn</a></li><li class="menu-item"><a href="http://connect.qq.com/widget/shareqq/index.html?site=NekoMio's Blog&title=NekoMio's Blog&summary=NekoMio 的博客 爱这个世界&pics=https://www.nekomio.com/null.webp&url=https://www.nekomio.com/2017/07/03/26/" target="_blank" rel="external noopener noreferrer nofollow">分享到 QQ</a></li><li class="menu-item"><a href="https://t.me/share/url?url=https://www.nekomio.com/2017/07/03/26/&text=NekoMio's Blog" target="_blank" rel="external noopener noreferrer nofollow">分享到 Telegram</a></li><li class="menu-item"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIQAAACECAAAAAB0L9x7AAABfklEQVR42u3ayw7DMAhE0fz/T7ebbloZGJCVjKubTdRXfCpZgLGvl8F1gQAB4gjElVxfP/i8/r2vnqE+F4QvYjlpfgbJBsyw6XNBWCNWE2v1eRp8gt+v3gdxNiIKOGkgAvHXiGqCRkAQZyOyRDSdkNuyKIjbEVVAmt63VdsgbkWUi9Zi4kUF8dZVOYhbEbsCUJXUlgslELYIdXGrYpRmCwhfRFbIqI2yarBWxATxOKJqgkSDdyZlNKFB+CN2FLJqggNxHqIKXt1gJzfYQTyOiL6YNcGyjZnqT4RZFIQNIhtIaZxnyS1Dg/BFVJhuIVMFLxD+iKh5nk2uXcUuCF9EtOFebbYqm7nZAhmEP6KzOad8t51FQVghOsWI2kgrCyQQlghlI65KXOpCCsQZCPWgsNJcVQ72lIUuCAvEJFkpQa4MgiCsEdNmmXoQrH1qAIQ1YtI0kxZEII5FdBvwalIE4Y2YLm6mB0FAeCNGBzCqQ8DTA4AgHkc8eYEAAcIa8QYYs1nZH/LGaQAAAABJRU5ErkJggg==" alt="QRCode"></li></ul></div></div></div></div><div class="card-body"><article id="post-content"><h3 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h3><p>Every morning when they are milked, the Farmer John’s cows form a rectangular grid that is R (1 &lt;= R &lt;= 10,000) rows by C (1 &lt;= C &lt;= 75) columns. As we all know, Farmer John is quite the expert on cow behavior, and is currently writing a book about feeding behavior in cows. He notices that if each cow is labeled with an uppercase letter indicating its breed, the two-dimensional pattern formed by his cows during milking sometimes seems to be made from smaller repeating rectangular patterns.</p><span id="more"></span><p>Help FJ find the rectangular unit of smallest area that can be repetitively tiled to make up the entire milking grid. Note that the dimensions of the small rectangular unit do not necessarily need to divide evenly the dimensions of the entire milking grid, as indicated in the sample input below.</p><h3 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h3><ul><li><p>Line 1: Two space-separated integers: R and C</p></li><li><p>Lines 2..R+1: The grid that the cows form, with an uppercase letter denoting each cow’s breed. Each of the R input lines has C characters with no space or other intervening character.</p></li></ul><h3 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h3><ul><li>Line 1: The area of the smallest unit from which the grid is formed<h3 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h3><blockquote><p>2 5<br>ABABA<br>ABABA</p></blockquote><h3 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h3><blockquote><p>2</p></blockquote></li></ul><h2 id="题解"><a href="#题解" class="headerlink" title="题解"></a>题解</h2><p>要求循环节，想到<a target="_blank" rel="noopener" href="https://wildrage.cf/2017/06/13/2/">“POJ 2406 Power Strings”</a><br>把情况拓展到二维<br>对于每一个横行求最短循环节也就是m-next[m]<br>然后不断的求lcm<br>竖列也是一样<br>最后乘起来就可以了<br>不过在求lcm时如果大于边界就可以将他的值给为边界</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * @Author: WildRage </span></span><br><span class="line"><span class="comment"> * @Date: 2017-07-01 10:17:47 </span></span><br><span class="line"><span class="comment"> * @Last Modified by: WildRage</span></span><br><span class="line"><span class="comment"> * @Last Modified time: 2017-07-01 11:08:00</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">namespace</span> MineWorkSpace&#123;</span><br><span class="line">	<span class="type">char</span> s[<span class="number">10005</span>][<span class="number">80</span>];</span><br><span class="line">	<span class="type">int</span> next[<span class="number">10005</span>][<span class="number">80</span>];</span><br><span class="line">	<span class="type">int</span> next2[<span class="number">80</span>][<span class="number">10005</span>];</span><br><span class="line">	<span class="function"><span class="type">int</span> <span class="title">gcd</span><span class="params">(<span class="type">int</span> a,<span class="type">int</span> b)</span></span>&#123;</span><br><span class="line">		<span class="keyword">return</span> b==<span class="number">0</span>? a: <span class="built_in">gcd</span>(b,a%b);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="type">int</span> <span class="title">lcm</span><span class="params">(<span class="type">int</span> a,<span class="type">int</span> b)</span></span>&#123;</span><br><span class="line">		<span class="keyword">return</span> a/<span class="built_in">gcd</span>(a,b)*b;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="type">int</span> <span class="title">Main</span><span class="params">()</span></span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">	<span class="meta">#<span class="keyword">ifdef</span> Mine</span></span><br><span class="line">	    <span class="built_in">freopen</span>(<span class="string">&quot;mgrid.in&quot;</span>,<span class="string">&quot;r&quot;</span>,stdin);</span><br><span class="line">	    <span class="built_in">freopen</span>(<span class="string">&quot;mgrid.out&quot;</span>,<span class="string">&quot;w&quot;</span>,stdout);</span><br><span class="line">	<span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line">		<span class="type">int</span> n,m;</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>,&amp;n,&amp;m);</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;i++)&#123;</span><br><span class="line">			<span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>,s[i]);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="type">int</span> ans1=<span class="number">1</span>,ans2=<span class="number">1</span>;</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;i++)&#123;</span><br><span class="line">			<span class="type">int</span> j=<span class="number">0</span>,k=<span class="number">-1</span>;</span><br><span class="line">			next[i][<span class="number">0</span>]=<span class="number">-1</span>;</span><br><span class="line">			<span class="keyword">while</span>(j&lt;m)&#123;</span><br><span class="line">				<span class="keyword">if</span>(k==<span class="number">-1</span>||s[i][j]==s[i][k])&#123;</span><br><span class="line">					next[i][++j]=++k;</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">else</span> k=next[i][k];</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">if</span>(m-next[i][m]) ans1=<span class="built_in">lcm</span>(ans1,m-next[i][m]);</span><br><span class="line">			<span class="keyword">if</span>(ans1&gt;m)ans1=m;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;m;i++)&#123;</span><br><span class="line">			<span class="type">int</span> j=<span class="number">0</span>,k=<span class="number">-1</span>;</span><br><span class="line">			next2[i][<span class="number">0</span>]=<span class="number">-1</span>;</span><br><span class="line">			<span class="keyword">while</span>(j&lt;n)&#123;</span><br><span class="line">				<span class="keyword">if</span>(k==<span class="number">-1</span>||s[j][i]==s[k][i])&#123;</span><br><span class="line">					next2[i][++j]=++k;</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">else</span> k=next2[i][k];</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">if</span>(n-next2[i][n])ans2=<span class="built_in">lcm</span>(ans2,n-next2[i][n]);</span><br><span class="line">			<span class="keyword">if</span>(ans2&gt;n)ans2=n;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,ans1*ans2);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	MineWorkSpace::<span class="built_in">Main</span>();</span><br><span class="line">	<span class="comment">//while(1);</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></article><blockquote class="post-license"><p><strong>本文作者&nbsp;:&nbsp;NekoMio</strong><br><strong><a rel="license noopener" target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议</a>进行许可。</strong><br><strong>本文链接&nbsp;:&nbsp;</strong><a href="https://www.nekomio.com/2017/07/03/26/">https://www.nekomio.com/2017/07/03/26/</a></p></blockquote><blockquote id="date-expire-notification" class="post-expired-notify">本文最后更新于 <span id="date-expire-num"></span> 天前，文中所描述的信息可能已发生改变</blockquote><script>!function(){var e=Date.parse("2023-06-09"),t=(new Date).getTime(),t=Math.floor((t-e)/864e5);120<=t?document.getElementById("date-expire-num").innerHTML=t:document.getElementById("date-expire-notification").style.display="none"}()</script><p class="post-footer-info mb-0 pt-0">本文发表于&nbsp;<time datetime="2017-07-03T08:12:51.000Z" itemprop="datePublished">2017-07-03</time> , 最后修改于&nbsp;<time datetime="2023-06-09T07:12:53.158Z" itemprop="dateModified">2023-06-09</time></p><p class="post-footer-info mb-0 pt-2"><span class="post-categories-list mt-2"><a class="post-categories-list-item" href="/categories/%E9%A2%98%E8%A7%A3/">题解</a> </span><span class="post-tags-list mt-2"><a class="post-tags-list-item" href="/tags/KMP/" rel="tag">#&nbsp;KMP</a></span></p></div><div class="post-nav px-2 bg-gray"><ul class="pagination"><li class="page-item page-prev"><a href="/2017/07/03/28/" rel="prev"><div class="page-item-title"><i class="icon icon-back" aria-hidden="true"></i></div><div class="page-item-subtitle">HDU 1166 敌兵布阵</div></a></li><li class="page-item page-next"><a href="/2017/06/25/25/" rel="next"><div class="page-item-title"><i class="icon icon-forward" aria-hidden="true"></i></div><div class="page-item-subtitle">BZOJ 4720 [NOIP2016]换教室</div></a></li></ul></div><div class="card-footer post-comment"><div id="vcomments"></div><link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/waline/2.14.1/waline.css"><script src="https://cdn.bootcdn.net/ajax/libs/waline/2.14.1/waline.js"></script><script>function loadWaline(){Waline.init({el:"#vcomments",locale:{placeholder:"评论经过人工审核后可见(Comment are visible after manual review)"},path:window.location.pathname,pageSize:"10",wordLimit:250,lang:"zh-cn",serverURL:"https://comment.nekomio.com",reaction:!0,emoji:["//unpkg.com/@waline/emojis@1.1.0/weibo","//unpkg.com/@waline/emojis@1.1.0/bilibili"]})}window.addEventListener("DOMContentLoaded",loadWaline,!1)</script></div></div></div></div></div><footer class="text-center"><p class="footer-copyright mb-0">Copyright&nbsp;©&nbsp;<span id="copyright-year"></span> <a class="footer-copyright-a" href="https://www.nekomio.com">NekoMio's Blog</a></p><p class="footer-text mb-0"><a target="_blank" href="https://beian.miit.gov.cn/" rel="nofollow noopener noreferrer noopener">京ICP备19044785号-1</a><br>「<a target="_blank" rel="noopener" href="https://www.cloudflare.com/">Cloudflare Pages</a> 提供网站托管服务」</p><p class="footer-develop mb-0"><span id="busuanzi_container_site_uv" hidden><span></span> <span id="busuanzi_value_site_uv"></span> <span>Viewers</span> <span>|</span> </span>Powered by&nbsp;<a href="https://hexo.io" target="_blank" class="footer-develop-a" rel="external nofollow noopener noreferrer">Hexo</a><span class="footer-develop-divider"></span>Theme&nbsp;-&nbsp;<a href="https://github.com/SukkaW/hexo-theme-suka" target="_blank" class="footer-develop-a" rel="external noopener">Suka</a></p></footer><script>window.lazyLoadOptions={elements_selector:".lazyload",threshold:50},function(){var e=(new Date).getFullYear(),o=document.getElementById("copyright-year");o.textContent=2017===e?e:"2017 - "+e}(),console.log("\n %c Suka Theme (hexo-theme-suka) | © SukkaW | Verision 1.4.0 %c https://github.com/SukkaW/hexo-theme-suka \n","color: #fff; background: #444; padding:5px 0;","background: #bbb; padding:5px 0;")</script><script src="/lib/vanilla-lazyload/lazyload.min.js" async></script><script src="https://cdn.jsdelivr.net/npm/busuanzi@2.3.0/bsz.pure.mini.js" async></script><script defer src="https://cdn.bootcdn.net/ajax/libs/KaTeX/0.16.0/katex.min.js" integrity="sha384-X/XCfMm41VSsqRNQgDerQczD69XqmjOOOwYQvr/uuC+j4OPoNhVgjdGFwhvN02Ja" crossorigin="anonymous"></script><script defer src="https://cdn.bootcdn.net/ajax/libs/KaTeX/0.16.0/contrib/auto-render.min.js" integrity="sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR" crossorigin="anonymous"></script><script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}],throwOnError:!1})})</script></body></html>