<!DOCTYPE html>

<html lang="zh-CN">
    <head>
    <meta charset="utf-8">
    <!--
        hexo-theme-suka © SukkaW
        GitHub: https://github.com/SukkaW/hexo-theme-suka
    -->

    <!-- ### Resource Hint ### -->

    <!-- ## DNS Prefetch ## -->
    <meta http-equiv="x-dns-prefetch-control" content="on">

<!-- busuanzi -->

    <link rel="dns-prefetch" href="https://busuanzi.ibruce.info">


<!-- comment -->






    <link rel="dns-prefetch" href="//cdn1.lncld.net">


<!-- analytics -->







    <!-- ## Preload ## -->
    
    <!-- Busuanzi -->
    
    <link rel="preload" href="https://npm.elemecdn.com/busuanzi@2.3.0/bsz.pure.mini.js" as="script">







    <!-- ### Meta & Title & Info ### -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, minimum-scale=1, initial-scale=1, maximum-scale=5, viewport-fit=cover">
    <meta name="renderer" content="webkit">

    <!-- Title -->
    <title>HDU1693 Eat the Trees &amp;&amp; BZOJ 1210 [HNOI2004] 邮递员 | NekoMio&#39;s Blog</title>

    <!-- Favicons -->
    <link rel="icon" type="image&#x2F;ico" href="/null.webp">

    <!-- ### Import File ### -->
    <link rel="stylesheet" href="/lib/spectre/spectre.min.css"><style>
    body {
        background-color: #f8f9fa;
    }

    a, a:visited {
        color: #0070ff;
    }

    a:active, a:focus, a:hover {
        color: #0070ff;
        opacity: .75;
    }

    #post-content a,
    #post-content a:hover,
    #post-content a:focus,
    #post-content a:visited {
        color: #005eb9;
        opacity: 1;
    }

    

    .post-entry .card-body a {
        color: #0070ff;
    }

    .avatar {
        background: #444;
    }

    .navbar-link,
    .navbar-link:visited,
    .timeline .timeline-item .timeline-icon.icon-lg {
        color: #0070ff;
    }

    .navbar-link:hover {
        color: #0070ff;
        opacity: .8;
    }

    #search-input .btn,
    #disqus_click_btn,
    #disqus-switch-to-direct,
    #disqus-loadmore-button {
        background: #727e96;
        border-color: #727e96;
        color: #fff;
    }

    #post-toc a.post-toc-link,
    #post-toc a.post-toc-link:visited,
    .share-menu.menu .menu-item>a {
        color: #727e96;
    }

    .share-menu.menu .menu-item>a:hover,
    .share-menu.menu .menu-item>a:focus,
    .share-menu.menu .menu-item>a:visited {
        color: #50596c;
        background: #f8f9fa;
        opacity: .85;
    }
</style><link rel="stylesheet" href="/css/style.min.css">








    <!-- Prettify Theme -->
    
    <link rel="preload" href="/css/highlight/github.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="/css/highlight/github.min.css"></noscript>





<script>
/*! loadCSS. [c]2017 Filament Group, Inc. MIT License */
!function(t){"use strict";t.loadCSS||(t.loadCSS=function(){});var e=loadCSS.relpreload={};if(e.support=function(){var e;try{e=t.document.createElement("link").relList.supports("preload")}catch(t){e=!1}return function(){return e}}(),e.bindMediaToggle=function(t){var e=t.media||"all";function a(){t.addEventListener?t.removeEventListener("load",a):t.attachEvent&&t.detachEvent("onload",a),t.setAttribute("onload",null),t.media=e}t.addEventListener?t.addEventListener("load",a):t.attachEvent&&t.attachEvent("onload",a),setTimeout(function(){t.rel="stylesheet",t.media="only x"}),setTimeout(a,3e3)},e.poly=function(){if(!e.support())for(var a=t.document.getElementsByTagName("link"),n=0;n<a.length;n++){var o=a[n];"preload"!==o.rel||"style"!==o.getAttribute("as")||o.getAttribute("data-loadcss")||(o.setAttribute("data-loadcss",!0),e.bindMediaToggle(o))}},!e.support()){e.poly();var a=t.setInterval(e.poly,500);t.addEventListener?t.addEventListener("load",function(){e.poly(),t.clearInterval(a)}):t.attachEvent&&t.attachEvent("onload",function(){e.poly(),t.clearInterval(a)})}"undefined"!=typeof exports?exports.loadCSS=loadCSS:t.loadCSS=loadCSS}("undefined"!=typeof global?global:this);
</script>

    <!-- ### Site Verification ### -->
    


    <link rel="alternate" type="application/rss+xml" href="/rss2.xml"><meta name="mobile-web-app-capable" content="yes"><meta name="application-name" content="NekoMio's Blog"><meta name="msapplication-starturl" content="https://www.nekomio.com"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="NekoMio's Blog"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <!-- ### The Open Graph & Twitter Card Protocol ### -->
    <meta property="og:title" content="HDU1693 Eat the Trees &amp;&amp; BZOJ 1210 [HNOI2004] 邮递员 | NekoMio&#39;s Blog"><meta property="og:site_name" content="NekoMio&#39;s Blog"><meta property="og:type" content="article"><meta property="og:url" content="https://www.nekomio.com/2017/08/08/75/"><meta property="og:locale" content="zh-CN"><meta name="description" content="先来一个最入门的HDU 1693  哈密顿回路 多回路 Problem DescriptionMost of us know that in the game called DotA(Defense of the Ancient), Pudge is a strong hero in the first period of the game. When the game goes to end h - NekoMio - NekoMio&#39;s Blog"><meta name="keywords" content="插头DP"><meta property="og:image" content="https://i.loli.net/2017/08/08/5989a4fbd2f53.jpg"><meta property="article:published_time" content="2017-08-08T11:23:32.000Z"><meta property="article:modified_time" content="2022-06-02T15:21:23.367Z"><meta property="og:updated_time" content="2022-06-02T15:21:23.367Z"><meta property="article:author" content="NekoMio"><meta property="article:tag" content="插头DP"><meta name="twitter:card" content="summary">

    

    <!-- ### Canonical link ### -->
    <link rel="canonical" href="https://www.nekomio.com/2017/08/08/75/">

    <meta name="generator" content="Hexo 5.4.0">

    <!-- ### Analytics ### -->
    
    <!-- CFGA Analytics -->
<script>
    window.ga_tid = "UA-102044541-2"; // {String} The trackerID of your site.
    window.ga_api = "https://analytics.nekomio.com/cfga/jquery.js"; // {String} The route of your cloudflare workers you just registered before.
</script>
<script src="https://npm.elemecdn.com/cfga@1.0.3" async></script>









    <!-- ### Structured Data ### -->
    



<script type="application/ld+json">
{
    "@context": "http://schema.org",
    "url": "https://www.nekomio.com/2017/08/08/75/",
    "@type": "BlogPosting",
    "logo": "https://www.nekomio.com/null.webp",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https://www.nekomio.com/2017/08/08/75/"
    },
    "headline": "HDU1693 Eat the Trees &amp;&amp; BZOJ 1210 [HNOI2004] 邮递员 | NekoMio&#39;s Blog",
    
    "image": {
        "@type": "ImageObject",
        "url": "https://www.nekomio.com/null.webp"
    },
    
    "datePublished": "2017-08-08T11:23:32.000Z",
    "dateModified": "2022-06-02T15:21:23.367Z",
    "author": {
        "@type": "Person",
        "name": "NekoMio",
        "image": {
            "@type": "ImageObject",
            "url": "https://www.nekomio.com/null.webp"
        },
        "description": "美しいものが起こることを常に信じている"
    },
    "publisher": {
        "@type": "Organization",
        "name": "NekoMio&#39;s Blog",
        "logo": {
            "@type": "ImageObject",
            "url": "https://www.nekomio.com/null.webp"
        }
    },
    
    "potentialAction": {
        "@type": "SearchAction",
        "target": "https://www.nekomio.com/search.html?s={search_term_string}",
        "query-input": "required name=search_term_string"
    },
    
    "keywords": "插头DP",
    "description": "先来一个最入门的HDU 1693  哈密顿回路 多回路 Problem DescriptionMost of us know that in the game called DotA(Defense of the Ancient), Pudge is a strong hero in the first period of the game. When the game goes to end h - NekoMio - NekoMio&#39;s Blog"
}
</script>



    <!-- ### Custom Head ### -->
    <link rel="stylesheet" href="https://npm.elemecdn.com/katex@0.15.3/dist/katex.min.css" integrity="sha384-KiWOvVjnN8qwAZbuQyWDIbfCLFhLXNETzBQjA/92pIowpC0d2O3nppDGQVgwd2nB" crossorigin="anonymous"><script> window.WebFontConfig = { custom: { families: ["KaTeX_AMS", "KaTeX_Caligraphic:n4,n7", "KaTeX_Fraktur:n4,n7", "KaTeX_Main:n4,n7,i4,i7", "KaTeX_Math:i4,i7", "KaTeX_Script", "KaTeX_SansSerif:n4,n7,i4", "KaTeX_Size1", "KaTeX_Size2", "KaTeX_Size3", "KaTeX_Size4", "KaTeX_Typewriter"], }, }; </script><script defer src="https://npm.elemecdn.com/webfontloader@1.6.28/webfontloader.js" integrity="sha256-4O4pS1SH31ZqrSO2A/2QJTVjTPqVe+jnYgOWUVr7EEc=" crossorigin="anonymous"></script><style>::-webkit-scrollbar{  width: 5px;  height: 8px;  background-color: #B9B9B9;}::-webkit-scrollbar-track{  border-radius: 10px;  background-color: #B9B9B9;}::-webkit-scrollbar-thumb{  border-radius: 10px;  background-color: #FFB6B9; }</style><style>html:not([stylus-iframe]) body:before {  content: "";  position: fixed;  top: 0;  right: 0;  bottom: 0;  left: 0;  z-index: -100;  background-image: url(https://file.nekomio.com/img/bg.webp);  background-position: center bottom;  background-size: cover;  background-attachment: fixed;  background-repeat: no-repeat;}@media screen and (max-width: 1650px) {  html:not([stylus-iframe]) body:before {      background-image: url(https://file.nekomio.com/img/bg_small.webp);  }}</style>
</head>

    <body>
            

            <!-- ### Main content ### -->
            <!-- ## Header ##-->
<header>
    <h1 class="header-title text-center"><a href="/">NekoMio&#39;s Blog</a></h1>

    <p class="text-center header-slogan">
        
            
                美しいものが起こることを常に信じている
            
        
    </p>

    <nav class="navbar-section text-center">
    
        <a href="/" class="navbar-link">首页</a>
    
    
        <a href="/archives/" class="navbar-link">归档</a>
    
    
        <a href="/search.html" class="navbar-link">搜索</a>
    
    
        <a href="/links.html" class="navbar-link">Friends</a>
    
    
        <div class="dropdown dropdown-right">
    <a class="navbar-link dropdown-toggle" tabindex="0">分享</a>
    <ul class="menu share-menu">

        <!-- Share Weibo -->
        
        <li class="menu-item">
            <a href="http://service.weibo.com/share/share.php?appkey=&title=NekoMio's Blog&url=https://www.nekomio.com&pic=https://www.nekomio.com/null.webp&searchPic=false&style=simple" target="_blank" rel="external noopener noreferrer nofollow">分享到微博</a>
        </li>
        

        <!-- Share Twitter -->
        
        <li class="menu-item">
            <a href="https://twitter.com/intent/tweet?text=NekoMio's Blog&url=https://www.nekomio.com&via=NekoMio" target="_blank" rel="external noopener noreferrer nofollow">分享到 Twitter</a>
        </li>
        

        <!-- Share Facebook -->
        
        <li class="menu-item">
            <a href="https://www.facebook.com/sharer/sharer.php?u=https://www.nekomio.com" target="_blank" rel="external noopener noreferrer nofollow">分享到 Facebook</a>
        </li>
        

        <!-- Share Google+ -->
        
        <li class="menu-item">
            <a href="https://plus.google.com/share?url=https://www.nekomio.com" target="_blank" rel="external noopener noreferrer nofollow">分享到 Google+</a>
        </li>
        

        <!-- Share LinkedIn -->
        
        <li class="menu-item">
            <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://www.nekomio.com&title=HDU1693 Eat the Trees &amp;&amp; BZOJ 1210 [HNOI2004] 邮递员" target="_blank" rel="external noopener noreferrer nofollow">分享到 LinkedIn</a>
        </li>
        

        <!-- Share QQ -->
        
        <li class="menu-item">
            <a href="http://connect.qq.com/widget/shareqq/index.html?site=NekoMio's Blog&title=HDU1693 Eat the Trees &amp;&amp; BZOJ 1210 [HNOI2004] 邮递员&summary=NekoMio 的博客 爱这个世界&pics=https://www.nekomio.com/null.webp&url=https://www.nekomio.com" target="_blank" rel="external noopener noreferrer nofollow"> 分享到 QQ</a>
        </li>
        

        <!-- Share Telegram -->
        
        <li class="menu-item">
            <a href="https://t.me/share/url?url=https://www.nekomio.com&text=HDU1693 Eat the Trees &amp;&amp; BZOJ 1210 [HNOI2004] 邮递员" target="_blank" rel="external noopener noreferrer nofollow">分享到 Telegram</a>
        </li>
        

        <!-- QRCode -->
        
        <li class="menu-item">
            <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIQAAACECAAAAAB0L9x7AAABgUlEQVR42u3a0Q7CIAxA0f3/T+uzBNrLVCjL5UWzZHBMENrC9SrQLhEiRByBuIL28ULzrP3evkf6FVEX0Z00nQFHA/feQ/2KKI3oTayZz3byZv2KOBvRW4RGCxLtV8RzEL2FaLSBiTgbMdpoaLDy111UxHJE1PE3nz+LtkUsRaRJ62ihCZ79PCsXsRRBApQo2ekly6Q/EXURI0z0LNqcyI8RcRYimlQkIZpZuETURIQTBwY42aQcBb8i6iKi5CZLirNNKlrgRNRF0IA2Goj0hSs1IrYiyGAZMEuGbge6IrYgZgsio44zPNrARJRARAXzbIOiiQ76d4gog6AAFKRMBrsizkLMHLqQwPfWxBSxFUGK6LRzfKgrojSCbEz0AiBOqkWURJCDOJoQkwseIuoj6EXhDJgd2ODqnYgSCDLAzIFsVrAXcQYCJSvgIJ9sfiKeiciKZighEnEsghbdL9BuT0wRyxFZwBpBZy4IiTgDQRJZUnwnl4NE1EfsbCJEiCiNeAMjsdpKTXpSSwAAAABJRU5ErkJggg==" alr="QRCode">
        </li>
        

    </ul>
</div>
    
    
</nav>
</header>

            
    <!-- ## Post ## -->
    <div class="post-container">
    <div id="post-card" class="card">
        
        <div class="card-item-container">
            <div class="card-inner-cell">
                <!-- # Post Header Info # -->
                <div class="card-header">
                    
    <h1 class="card-title h3 mb-2">HDU1693 Eat the Trees && BZOJ 1210 [HNOI2004] 邮递员</h1>




<div class="post-header-info">
    <p class="post-header-info-left text-gray">
        <img class="author-thumb lazyload" data-src="/null.webp" src="/img/suka-lazyload.gif" alt="NekoMio's Avatar">
        <span>2017-08-08</span>
        
            <span class="suka-devide-dot"></span>
            <a class="category-link" href="/categories/%E9%A2%98%E8%A7%A3/">题解</a>
        
        
            <!-- Busuanzi Post Views -->
<span id="busuanzi_container_page_pv" hidden>
    <span class="suka-devide-dot"></span>
    <span></span>
    <span id="busuanzi_value_page_pv"></span>
    <span>Views</span>
</span>
        
        
    </p>
    <div class="post-header-info-right">
        
            <div class="dropdown dropdown-right">
<a class="dropdown-toggle" tabindex="0">分享本文</a>
<ul class="menu share-menu">
    <!-- Share Weibo -->
    
    <li class="menu-item">
        <a href="http://service.weibo.com/share/share.php?appkey=&title=HDU1693 Eat the Trees &amp;&amp; BZOJ 1210 [HNOI2004] 邮递员&url=https://www.nekomio.com/2017/08/08/75/&pic=https://www.nekomio.com/null.webp&searchPic=false&style=simple" target="_blank" rel="external noopener noreferrer nofollow">分享到微博</a>
    </li>
    

    <!-- Share Twitter -->
    
    <li class="menu-item">
        <a href="https://twitter.com/intent/tweet?text=HDU1693 Eat the Trees &amp;&amp; BZOJ 1210 [HNOI2004] 邮递员&url=https://www.nekomio.com/2017/08/08/75/&via=NekoMio" target="_blank" rel="external noopener noreferrer nofollow">分享到 Twitter</a>
    </li>
    

    <!-- Share Facebook -->
    
    <li class="menu-item">
        <a href="https://www.facebook.com/sharer/sharer.php?u=https://www.nekomio.com/2017/08/08/75/" target="_blank" rel="external noopener noreferrer nofollow">分享到 Facebook</a>
    </li>
    

    <!-- Share Google+ -->
    
    <li class="menu-item">
        <a href="https://plus.google.com/share?url=https://www.nekomio.com/2017/08/08/75/" target="_blank" rel="external noopener noreferrer nofollow">分享到 Google+</a>
    </li>
    

    <!-- Share LinkedIn -->
    
    <li class="menu-item">
        <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://www.nekomio.com/2017/08/08/75/&title=NekoMio's Blog" target="_blank" rel="external noopener noreferrer nofollow">分享到 LinkedIn</a>
    </li>
    

    <!-- Share QQ -->
    
    <li class="menu-item">
        <a href="http://connect.qq.com/widget/shareqq/index.html?site=NekoMio's Blog&title=NekoMio's Blog&summary=NekoMio 的博客 爱这个世界&pics=https://www.nekomio.com/null.webp&url=https://www.nekomio.com/2017/08/08/75/" target="_blank" rel="external noopener noreferrer nofollow"> 分享到 QQ</a>
    </li>
    

    <!-- Share Telegram -->
    
    <li class="menu-item">
        <a href="https://t.me/share/url?url=https://www.nekomio.com/2017/08/08/75/&text=NekoMio's Blog" target="_blank" rel="external noopener noreferrer nofollow">分享到 Telegram</a>
    </li>
    

    <!-- QRCode -->
    
    <li class="menu-item">
        <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIQAAACECAAAAAB0L9x7AAABgUlEQVR42u3a0Q7CIAxA0f3/T+uzBNrLVCjL5UWzZHBMENrC9SrQLhEiRByBuIL28ULzrP3evkf6FVEX0Z00nQFHA/feQ/2KKI3oTayZz3byZv2KOBvRW4RGCxLtV8RzEL2FaLSBiTgbMdpoaLDy111UxHJE1PE3nz+LtkUsRaRJ62ihCZ79PCsXsRRBApQo2ekly6Q/EXURI0z0LNqcyI8RcRYimlQkIZpZuETURIQTBwY42aQcBb8i6iKi5CZLirNNKlrgRNRF0IA2Goj0hSs1IrYiyGAZMEuGbge6IrYgZgsio44zPNrARJRARAXzbIOiiQ76d4gog6AAFKRMBrsizkLMHLqQwPfWxBSxFUGK6LRzfKgrojSCbEz0AiBOqkWURJCDOJoQkwseIuoj6EXhDJgd2ODqnYgSCDLAzIFsVrAXcQYCJSvgIJ9sfiKeiciKZighEnEsghbdL9BuT0wRyxFZwBpBZy4IiTgDQRJZUnwnl4NE1EfsbCJEiCiNeAMjsdpKTXpSSwAAAABJRU5ErkJggg==" alt="QRCode">
    </li>
    

</ul>
</div>
        
    </div>
</div>
                </div>
                <div class="card-body">
                    
                    <article id="post-content">
                        <p>先来一个最入门的<br>HDU 1693 </p>
<p>哈密顿回路 多回路</p>
<h3 id="Problem-Description"><a href="#Problem-Description" class="headerlink" title="Problem Description"></a>Problem Description</h3><p>Most of us know that in the game called DotA(Defense of the Ancient), Pudge is a strong hero in the first period of the game. When the game goes to end however, Pudge is not a strong hero any more.<br>So Pudge’s teammates give him a new assignment—Eat the Trees!</p>
<span id="more"></span>
<p>The trees are in a rectangle N * M cells in size and each of the cells either has exactly one tree or has nothing at all. And what Pudge needs to do is to eat all trees that are in the cells.<br>There are several rules Pudge must follow:<br>I. Pudge must eat the trees by choosing a circuit and he then will eat all trees that are in the chosen circuit.<br>II. The cell that does not contain a tree is unreachable, e.g. each of the cells that is through the circuit which Pudge chooses must contain a tree and when the circuit is chosen, the trees which are in the cells on the circuit will disappear.<br>III. Pudge may choose one or more circuits to eat the trees.</p>
<p>Now Pudge has a question, how many ways are there to eat the trees?<br>At the picture below three samples are given for N = 6 and M = 3(gray square means no trees in the cell, and the bold black line means the chosen circuit(s))<br><img src="https://i.loli.net/2017/08/08/5989a4fbd2f53.jpg" alt="HDU1693"></p>
<h3 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h3><p>The input consists of several test cases. The first line of the input is the number of the cases. There are no more than 10 cases.<br>For each case, the first line contains the integer numbers N and M, 1&lt;=N, M&lt;=11. Each of the next N lines contains M numbers (either 0 or 1) separated by a space. Number 0 means a cell which has no trees and number 1 means a cell that has exactly one tree.</p>
<h3 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h3><p>For each case, you should print the desired number of ways in one line. It is guaranteed, that it does not exceed 263 – 1. Use the format in the sample.</p>
<h3 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input"></a>Sample Input</h3><blockquote>
<p>2<br>6 3<br>1 1 1<br>1 0 1<br>1 1 1<br>1 1 1<br>1 0 1<br>1 1 1<br>2 4<br>1 1 1 1<br>1 1 1 1  </p>
</blockquote>
<h3 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output"></a>Sample Output</h3><blockquote>
<p>Case 1: There are 3 ways to eat the trees.<br>Case 2: There are 2 ways to eat the trees.  </p>
</blockquote>
<p>本题就是一道最基础的求回路的题目<br>因为我们不需要 要求一条回路，所以只需记录是否有插头就可以了</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> Max = (<span class="number">1</span> &lt;&lt; <span class="number">12</span>) + <span class="number">10</span>;</span><br><span class="line"><span class="keyword">int</span> n, m;</span><br><span class="line"><span class="keyword">int</span> mp[<span class="number">12</span>][<span class="number">12</span>];</span><br><span class="line"><span class="keyword">long</span> <span class="keyword">long</span> DP[<span class="number">12</span>][<span class="number">12</span>][Max];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dp</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(DP, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(DP));</span><br><span class="line">    DP[<span class="number">0</span>][m][<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">int</span> bit = <span class="number">1</span> &lt;&lt; (m + <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; (bit &gt;&gt; <span class="number">1</span>); j++)</span><br><span class="line">        &#123;</span><br><span class="line">            DP[i][<span class="number">0</span>][j &lt;&lt; <span class="number">1</span>] = DP[i - <span class="number">1</span>][m][j];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= m; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">0</span>; k &lt; bit; k++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">int</span> x = <span class="number">1</span> &lt;&lt; (j - <span class="number">1</span>);</span><br><span class="line">                <span class="keyword">int</span> y = <span class="number">1</span> &lt;&lt; j;</span><br><span class="line">                <span class="keyword">if</span> (mp[i][j])</span><br><span class="line">                &#123;</span><br><span class="line">                    DP[i][j][k] += DP[i][j - <span class="number">1</span>][k ^ x ^ y];</span><br><span class="line">                    <span class="keyword">if</span> ((k &amp; x) &amp;&amp; (k &amp; y))</span><br><span class="line">                        <span class="keyword">continue</span>;</span><br><span class="line">                    <span class="keyword">if</span> (!(k &amp; x) &amp;&amp; !(k &amp; y))</span><br><span class="line">                        <span class="keyword">continue</span>;</span><br><span class="line">                    DP[i][j][k] += DP[i][j - <span class="number">1</span>][k];</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">if</span> (!(k &amp; x) &amp;&amp; !(k &amp; y))</span><br><span class="line">                        DP[i][j][k] = DP[i][j - <span class="number">1</span>][k];</span><br><span class="line">                    <span class="keyword">else</span></span><br><span class="line">                        DP[i][j][k] = <span class="number">0</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> t, num = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;t);</span><br><span class="line">    <span class="keyword">while</span> (t--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;n, &amp;m);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= m; j++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;mp[i][j]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">dp</span>();</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Case %d: There are %lld ways to eat the trees.\n&quot;</span>, ++num, DP[n][m][<span class="number">0</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//while(1);</span></span><br><span class="line">&#125;</span><br><span class="line">```  </span><br><span class="line"></span><br><span class="line">然后是稍微复杂点的</span><br><span class="line"></span><br><span class="line">单回路</span><br><span class="line"></span><br><span class="line">【题目描述】</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Smith在P市的邮政局工作，他每天的工作是从邮局出发，到自己所管辖的所有邮筒取信件，然后带回邮局。</span><br><span class="line">他所管辖的邮筒非常巧地排成了一个m*n的点阵（点阵中的间距都是相等的）。左上角的邮筒恰好在邮局的门口。</span><br><span class="line">Smith是一个非常标新立异的人，他希望每天都能走不同的路线，但是同时，他又不希望路线的长度增加，他想知道他有多少条不同的路线可走。</span><br><span class="line"></span><br><span class="line">你的程序需要根据给定的输入，给出符合题意的输出：</span><br><span class="line">l 输入包括点阵的m和n的值；</span><br><span class="line">l 你需要根据给出的输入，计算出Smith可选的不同路线的总条数；</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">【输入格式】</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">输入文件postman.in只有一行。包括两个整数m, <span class="built_in">n</span>(<span class="number">1</span> &lt;= m &lt;= <span class="number">10</span>, <span class="number">1</span> &lt;= n &lt;= <span class="number">20</span>)，表示了Smith管辖内的邮筒排成的点阵。</span><br><span class="line"></span><br><span class="line">【输出格式】</span><br><span class="line"></span><br><span class="line">输出文件只有一行，只有一个整数，表示Smith可选的不同路线的条数。</span><br><span class="line">【样例输入】</span><br><span class="line"></span><br><span class="line"><span class="number">2</span> <span class="number">2</span> 说明：该输入表示，Smith管辖了<span class="number">2</span>*<span class="number">2</span>的一个邮筒点阵。</span><br><span class="line">【样例输出】</span><br><span class="line"></span><br><span class="line"><span class="number">2</span></span><br><span class="line">【提示】</span><br><span class="line">![COGS邮递员](https:<span class="comment">//i.loli.net/2017/08/08/5989a54398a57.png)</span></span><br><span class="line"></span><br><span class="line">详情请看代码</span><br><span class="line"></span><br><span class="line">```c++</span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;deque&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> LL long long</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> BA = <span class="number">100000</span>, SIZEN = <span class="number">10</span>, SIZEM = <span class="number">20</span>, BASE = <span class="number">200000</span>;</span><br><span class="line"><span class="keyword">int</span> N, M;</span><br><span class="line"><span class="keyword">int</span> H[BASE];</span><br><span class="line">class BigNum <span class="comment">/**高精度 */</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    <span class="keyword">int</span> s[<span class="number">50</span>];</span><br><span class="line">    <span class="keyword">void</span> <span class="keyword">operator</span>=(<span class="keyword">int</span> a)</span><br><span class="line">    &#123;</span><br><span class="line">        n = <span class="number">1</span>;</span><br><span class="line">        <span class="built_in">memset</span>(s, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(s));</span><br><span class="line">        s[<span class="number">0</span>] = a;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">void</span> <span class="keyword">operator</span>+=(BigNum a)</span><br><span class="line">    &#123;</span><br><span class="line">        n = <span class="built_in">max</span>(n, a.n) + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= n; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            s[i] += a.s[i];</span><br><span class="line">            s[i + <span class="number">1</span>] += s[i] / BA;</span><br><span class="line">            s[i] %= BA;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span> (n &gt; <span class="number">0</span> &amp;&amp; s[n - <span class="number">1</span>] == <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            n--;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">void</span> <span class="keyword">operator</span>*=(<span class="keyword">int</span> a)</span><br><span class="line">    &#123;</span><br><span class="line">        n++;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= n; i++)</span><br><span class="line">            s[i] *= a;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= n; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            s[i + <span class="number">1</span>] += s[i] / BA;</span><br><span class="line">            s[i] %= BA;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span> (n &gt; <span class="number">0</span> &amp;&amp; s[n - <span class="number">1</span>] == <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            n--;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">void</span> <span class="built_in">print</span>()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>, s[n - <span class="number">1</span>]);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = n - <span class="number">2</span>; i &gt;= <span class="number">0</span>; i--)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%05d&quot;</span>, s[i]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125; ans;</span><br><span class="line"></span><br><span class="line">class Pair <span class="comment">/**映射表 */</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">    BigNum Sum;</span><br><span class="line">    LL Id;</span><br><span class="line">    <span class="built_in">Pair</span>() &#123;&#125;</span><br><span class="line">    <span class="built_in">Pair</span>(LL a, BigNum b)</span><br><span class="line">    &#123;</span><br><span class="line">        Id = a;</span><br><span class="line">        Sum = b;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">deque&lt;Pair&gt; f[<span class="number">2</span>]; <span class="comment">/**循环数组 */</span></span><br><span class="line"><span class="keyword">void</span> <span class="built_in">read</span>()       <span class="comment">/**read */</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;N, &amp;M);</span><br><span class="line">    <span class="keyword">if</span> (N &lt; M)</span><br><span class="line">        <span class="built_in">swap</span>(N, M);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> <span class="built_in">Get</span>(<span class="keyword">int</span> x, <span class="keyword">int</span> j) <span class="comment">/**取4进制的操作 */</span></span><br><span class="line">&#123;</span><br><span class="line">    x &gt;&gt;= <span class="number">2</span> * (j - <span class="number">1</span>);</span><br><span class="line">    x &amp;= <span class="number">3</span>;</span><br><span class="line">    <span class="keyword">return</span> x;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> <span class="built_in">Change</span>(<span class="keyword">int</span> x, <span class="keyword">int</span> j, <span class="keyword">int</span> t) <span class="comment">/**把x的第j位改成t */</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">int</span> tmp = x &gt;&gt; (<span class="number">2</span> * (j - <span class="number">1</span>));</span><br><span class="line">    x -= tmp &lt;&lt; (j - <span class="number">1</span>) * <span class="number">2</span>;</span><br><span class="line">    tmp &gt;&gt;= <span class="number">2</span>;</span><br><span class="line">    x += tmp &lt;&lt; <span class="number">2</span> * j;</span><br><span class="line">    x += t &lt;&lt; ((j - <span class="number">1</span>) * <span class="number">2</span>);</span><br><span class="line">    <span class="keyword">return</span> x;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> <span class="built_in">Find</span>(<span class="keyword">int</span> x, <span class="keyword">int</span> j, <span class="keyword">int</span> dat) <span class="comment">/**找与他相连的括号 */</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">int</span> now = dat, k = j;</span><br><span class="line">    <span class="keyword">while</span> (k &gt;= <span class="number">1</span> &amp;&amp; k &lt;= M + <span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        k += now;</span><br><span class="line">        <span class="keyword">int</span> tmp = <span class="built_in">Get</span>(x, k);</span><br><span class="line">        <span class="keyword">if</span> (tmp == <span class="number">1</span>)</span><br><span class="line">            dat++;</span><br><span class="line">        <span class="keyword">if</span> (tmp == <span class="number">2</span>)</span><br><span class="line">            dat--;</span><br><span class="line">        <span class="keyword">if</span> (dat == <span class="number">0</span>)</span><br><span class="line">            <span class="keyword">return</span> k;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">void</span> <span class="built_in">Push</span>(<span class="keyword">int</span> k, <span class="keyword">int</span> Id, BigNum Sum) <span class="comment">/**插入hash表 */</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">int</span> now = Id % BASE;</span><br><span class="line">    <span class="keyword">while</span> (H[now]) <span class="comment">/**如果有 */</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (f[k][H[now]].Id == Id) <span class="comment">/**且就是这个状态 */</span></span><br><span class="line">        &#123;</span><br><span class="line">            f[k][H[now]].Sum += Sum; <span class="comment">/**加值，和并答案 */</span></span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        now++; <span class="comment">/**找自己的状态 */</span></span><br><span class="line">        <span class="keyword">if</span> (now == BASE)</span><br><span class="line">            now = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    H[now] = f[k].<span class="built_in">size</span>(); <span class="comment">/**如果第一次出现 */</span></span><br><span class="line">    f[k].<span class="built_in">push_back</span>(<span class="built_in">Pair</span>(Id, Sum));</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 1为左括号</span></span><br><span class="line"><span class="comment"> * 2为右括号</span></span><br><span class="line"><span class="comment"> * 0为无括号</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">void</span> <span class="built_in">DP</span>()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">int</span> k = <span class="number">0</span>;</span><br><span class="line">    BigNum p;</span><br><span class="line">    p = <span class="number">1</span>; <span class="comment">/**初始化状态 */</span></span><br><span class="line">    f[k].<span class="built_in">push_back</span>(<span class="built_in">Pair</span>(<span class="number">0</span>, p));</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= N; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= M; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            k ^= <span class="number">1</span>;                  <span class="comment">/**滚动数组 */</span></span><br><span class="line">            f[k].<span class="built_in">clear</span>();            <span class="comment">/**清空本维 */</span></span><br><span class="line">            <span class="built_in">memset</span>(H, <span class="number">0</span>, <span class="built_in"><span class="keyword">sizeof</span></span>(H)); <span class="comment">/**hash 数组 */</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> m = <span class="number">0</span>; m &lt; f[k ^ <span class="number">1</span>].<span class="built_in">size</span>(); m++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">int</span> Id = f[k ^ <span class="number">1</span>][m].Id;       <span class="comment">/**取状态 */</span></span><br><span class="line">                BigNum date = f[k ^ <span class="number">1</span>][m].Sum; <span class="comment">/**取值 */</span></span><br><span class="line">                <span class="keyword">int</span> L = <span class="built_in">Get</span>(Id, j), U = <span class="built_in">Get</span>(Id, j + <span class="number">1</span>);</span><br><span class="line">                <span class="comment">/**</span></span><br><span class="line"><span class="comment">                 * L:左面的 ，U: 右面的</span></span><br><span class="line"><span class="comment">                 */</span></span><br><span class="line">                <span class="keyword">int</span> tmp;      <span class="comment">/**分类讨论开始 */</span></span><br><span class="line">                <span class="keyword">if</span> (!L &amp;&amp; !U) <span class="comment">/**两个插头都是无插头状态 */</span></span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">if</span> (i != N &amp;&amp; j != M) <span class="comment">/**如果不是最后一个 */</span></span><br><span class="line">                    &#123;</span><br><span class="line">                        tmp = <span class="built_in">Change</span>(Id, j, <span class="number">1</span>); <span class="comment">/**构造一组新的括号 */</span></span><br><span class="line">                        tmp = <span class="built_in">Change</span>(tmp, j + <span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line">                        <span class="built_in">Push</span>(k, tmp, date); <span class="comment">/**插入Hash */</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span> (!L &amp;&amp; U) <span class="comment">/**左面的没有 */</span></span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">if</span> (j != M)            <span class="comment">/**向右转移 */</span></span><br><span class="line">                        <span class="built_in">Push</span>(k, Id, date); <span class="comment">/**延续状态 当j==M事不能向右动*/</span></span><br><span class="line">                    <span class="keyword">if</span> (i != N)            <span class="comment">/**向下转移 */</span></span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="comment">/**将L,U位置的 状态互换 转移*/</span></span><br><span class="line">                        tmp = <span class="built_in">Change</span>(Id, j, U);</span><br><span class="line">                        tmp = <span class="built_in">Change</span>(tmp, j + <span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">                        <span class="built_in">Push</span>(k, tmp, date);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span> (L &amp;&amp; !U) <span class="comment">/**上面的没有 */</span></span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">if</span> (i != N) <span class="comment">/**向下 */</span></span><br><span class="line">                        <span class="built_in">Push</span>(k, Id, date);</span><br><span class="line">                    <span class="keyword">if</span> (j != M) <span class="comment">/**向右 */</span></span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="comment">/**于上同理 */</span></span><br><span class="line">                        tmp = <span class="built_in">Change</span>(Id, j, <span class="number">0</span>);</span><br><span class="line">                        tmp = <span class="built_in">Change</span>(tmp, j + <span class="number">1</span>, L);</span><br><span class="line">                        <span class="built_in">Push</span>(k, tmp, date);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span> (L == <span class="number">1</span> &amp;&amp; U == <span class="number">1</span>) <span class="comment">/**两个都是左括号 */</span></span><br><span class="line">                &#123;</span><br><span class="line">                    tmp = <span class="built_in">Change</span>(Id, <span class="built_in">Find</span>(Id, j + <span class="number">1</span>, <span class="number">1</span>), <span class="number">1</span>); <span class="comment">/**将与上面相连的右括号转为左括号 */</span></span><br><span class="line">                    tmp = <span class="built_in">Change</span>(tmp, j, <span class="number">0</span>);                 <span class="comment">/**这两位都制为无括号 */</span></span><br><span class="line">                    tmp = <span class="built_in">Change</span>(tmp, j + <span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">                    <span class="built_in">Push</span>(k, tmp, date);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span> (L == <span class="number">2</span> &amp;&amp; U == <span class="number">2</span>)                <span class="comment">/**两个都是右括号 */</span></span><br><span class="line">                &#123;                                         <span class="comment">/**与上面对称 */</span></span><br><span class="line">                    tmp = <span class="built_in">Change</span>(Id, <span class="built_in">Find</span>(Id, j, <span class="number">-1</span>), <span class="number">2</span>); <span class="comment">/**将与左面相连的左括号制为右括号 */</span></span><br><span class="line">                    tmp = <span class="built_in">Change</span>(tmp, j, <span class="number">0</span>);               <span class="comment">/**这两位都为无括号 */</span></span><br><span class="line">                    tmp = <span class="built_in">Change</span>(tmp, j + <span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">                    <span class="built_in">Push</span>(k, tmp, date);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span> (L == <span class="number">2</span> &amp;&amp; U == <span class="number">1</span>) <span class="comment">/**左插头为右括号 上插头为左括号 */</span></span><br><span class="line">                &#123;                          <span class="comment">/**都制为无 */</span></span><br><span class="line">                    tmp = <span class="built_in">Change</span>(Id, j, <span class="number">0</span>);</span><br><span class="line">                    tmp = <span class="built_in">Change</span>(tmp, j + <span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">                    <span class="built_in">Push</span>(k, tmp, date);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span> (L == <span class="number">1</span> &amp;&amp; U == <span class="number">2</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">if</span> (i == N &amp;&amp; j == M)</span><br><span class="line">                        ans += date;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> km = <span class="number">0</span>; km &lt; f[k].<span class="built_in">size</span>(); km++) <span class="comment">/**提前换行准备为下一行使用 */</span></span><br><span class="line">            f[k][km].Id &lt;&lt;= <span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    ans *= <span class="number">2</span>;</span><br><span class="line">    ans.<span class="built_in">print</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> <span class="built_in">main</span>()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//freopen(&quot;postman.in&quot;, &quot;r&quot;, stdin);</span></span><br><span class="line">    <span class="comment">//freopen(&quot;postman.out&quot;, &quot;w&quot;, stdout);</span></span><br><span class="line">    <span class="built_in">read</span>();</span><br><span class="line">    <span class="keyword">if</span> (M == <span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;1&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">DP</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
                    </article>
                    
    <blockquote class="post-license">
        <p>
            <strong>本文作者&nbsp;:&nbsp;NekoMio</strong>
            <br>
            <strong>
            
                <a rel="license noopener" target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议</a>进行许可。
            </strong>
            <br>
            <strong>本文链接&nbsp;:&nbsp;</strong><a href="https://www.nekomio.com/2017/08/08/75/">https://www.nekomio.com/2017/08/08/75/</a>
        </p>
    </blockquote>



    <blockquote id="date-expire-notification" class="post-expired-notify">本文最后更新于 <span id="date-expire-num"></span> 天前，文中所描述的信息可能已发生改变</blockquote>
    <script>
    (function() {
        var dateUpdate = Date.parse("2022-06-02");
        var nowDate = new Date();
        var a = nowDate.getTime();
        var b = a - dateUpdate;
        var daysUpdateExpire = Math.floor(b/(24*3600*1000));
        if (daysUpdateExpire >= 120) {
            document.getElementById('date-expire-num').innerHTML = daysUpdateExpire;
        } else {
            document.getElementById('date-expire-notification').style.display = 'none';
        }
    })();
    </script>


<p class="post-footer-info mb-0 pt-0">本文发表于&nbsp;<time datetime="2017-08-08T11:23:32.000Z" itemprop="datePublished">2017-08-08</time>

    , 最后修改于&nbsp;<time datetime="2022-06-02T15:21:23.367Z" itemprop="dateModified">2022-06-02</time>

</p>
<p class="post-footer-info mb-0 pt-2">

<span class="post-categories-list mt-2">

<a class="post-categories-list-item" href='/categories/%E9%A2%98%E8%A7%A3/'>题解</a>

</span>



<span class="post-tags-list mt-2">

<a class="post-tags-list-item" href="/tags/%E6%8F%92%E5%A4%B4DP/" rel="tag">#&nbsp;插头DP</a>

</span>


</p>

                </div>
                <div class="post-nav px-2 bg-gray">
<ul class="pagination">
    <!-- Prev Nav -->
    
        <li class="page-item page-prev">
            <a href="/2017/08/08/76/" rel="prev">
                <div class="page-item-title"><i class="icon icon-back" aria-hidden="true"></i></div>
                <div class="page-item-subtitle">Evensgn 的债务</div>
            </a>
        </li>
    

    <!-- Next Nav -->
    
        <li class="page-item page-next">
            <a href="/2017/08/08/74/" rel="next">
                <div class="page-item-title"><i class="icon icon-forward" aria-hidden="true"></i></div>
                <div class="page-item-subtitle">书</div>
            </a>
        </li>
    
</ul>
</div>

                
                    <!-- # Comment # -->
                    
                        <div class="card-footer post-comment">
                            <div id="vcomments"></div>

<script src="https://npm.elemecdn.com/valine@latest/dist/Valine.min.js"></script>
<script>
    var GUEST_INFO = ['nick','mail','link'];
    var guest_info = 'nick,mail,link'.split(',').filter(function(item){
        return GUEST_INFO.indexOf(item) > -1
    });
    var notify = '' === 'true';
    var verify = '' === 'true';
    new Valine({
        el: '#vcomments',
        notify: notify,
        verify: verify,
        appId: "hRRi8jRRJiMaKCoOeToz8Geo-gzGzoHsz",
        appKey: "1gTOBrBAIYbj2urmHJfu5gcl",
        placeholder: "评论经过人工审核后可见(Comment are visible after manual review)",
        meta: guest_info,
        pageSize:'10',
        avatar:'identicon',
        lang:'zh-cn',
        serverURLs: 'https://leancloud.nekomio.com',
        guest_info: guest_info,
        visitor: false
    });
</script>

                        </div>
                    
                
            </div>
        </div>
    </div>
</div>

            <!-- ### Footer ### -->
            <footer class="text-center">
    <!-- footer copyright -->
    
        <p class="footer-copyright mb-0">Copyright&nbsp;©&nbsp;<span id="copyright-year"></span>
            <a class="footer-copyright-a" href="https://www.nekomio.com">NekoMio's Blog</a>
        </p>

    <!-- footer custom text -->
    <p class="footer-text mb-0">
    <a target="_blank" href="https://beian.miit.gov.cn/" rel="nofollow noopener noreferrer noopener">京ICP备19044785号-1</a><br/>「<a target="_blank" rel="noopener" href="https://webify.cloudbase.net/">CloudBase Webify</a> 与 <a target="_blank" rel="noopener" href="https://www.cloudflare.com/">Cloudflare Pages</a> 提供网站托管服务」
    </p>
    <!-- footer develop info -->
    <p class="footer-develop mb-0">
        
    <!-- Busuanzi User Views -->
    <span id="busuanzi_container_site_uv" hidden>
        <span></span>
        <span id="busuanzi_value_site_uv"></span>
        <span>Viewers</span>
        
            <span>|</span>
        
    </span>




        
        Powered by&nbsp;<!--
         --><a href="https://hexo.io" target="_blank" class="footer-develop-a" rel="external nofollow noopener noreferrer">Hexo</a><span class="footer-develop-divider"></span>Theme&nbsp;-&nbsp;<!--
         --><a href="https://github.com/SukkaW/hexo-theme-suka" target="_blank" class="footer-develop-a" rel="external noopener">Suka</a>
    </p>
</footer>


        <!-- ### Import File ### -->
        <!-- ### Footer JS Import ### -->

<script>

    
window.lazyLoadOptions = {
    elements_selector: ".lazyload",
    threshold: 50
};

(function() {
    var copyrightNow = new Date().getFullYear();
    var copyrightContent = document.getElementById('copyright-year');
    var copyrightSince = 2017;
    if (copyrightSince === copyrightNow) {
        copyrightContent.textContent = copyrightNow;
    } else {
        copyrightContent.textContent = copyrightSince + ' - ' + copyrightNow;
    }
})();
console.log('\n %c Suka Theme (hexo-theme-suka) | © SukkaW | Verision 1.4.0 %c https://github.com/SukkaW/hexo-theme-suka \n', 'color: #fff; background: #444; padding:5px 0;', 'background: #bbb; padding:5px 0;');

</script>

<script src="/lib/vanilla-lazyload/lazyload.min.js" async></script>
    <script src="https://npm.elemecdn.com/busuanzi@2.3.0/bsz.pure.mini.js" async></script>


<!-- Offset -->




<!-- Comment -->

    
        
    


<!-- ### Custom Footer ### -->
<script defer src="https://npm.elemecdn.com/katex@0.15.3/dist/katex.min.js" integrity="sha384-0fdwu/T/EQMsQlrHCCHoH10pkPLlKA1jL5dFyUOvB3lfeT2540/2g6YgSi2BL14p" crossorigin="anonymous"></script><script defer src="https://npm.elemecdn.com/katex@0.15.3/dist/contrib/auto-render.min.js" integrity="sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR" crossorigin="anonymous"></script><script> document.addEventListener("DOMContentLoaded", function() { renderMathInElement(document.body, { delimiters: [ {left: "$$", right: "$$", display: true}, {left: "$", right: "$", display: false}, {left: "\\(", right: "\\)", display: false}, {left: "\\[", right: "\\]", display: true} ], throwOnError : false }); });</script>
    </body>

</html>