<!DOCTYPE html><html class="article-header-style-default"><head><title>BZOJ 1972 [Sdoi2010]猪国杀 - NekoMio&#39;s Blog</title><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><meta name="description" content="概述  《猪国杀》是一种多猪牌类回合制游戏，一共有三种角色：主猪，忠猪，反猪。 每局游戏主猪有且只有一只，忠猪和反猪可以有多只，每只猪扮演一种角色。"><meta property="og:type" content="article"><meta property="og:title" content="BZOJ 1972 [Sdoi2010]猪国杀"><meta property="og:url" content="https://www.nekomio.com/2017/10/10/113/index.html"><meta property="og:site_name" content="NekoMio&#39;s Blog"><meta property="og:description" content="概述  《猪国杀》是一种多猪牌类回合制游戏，一共有三种角色：主猪，忠猪，反猪。 每局游戏主猪有且只有一只，忠猪和反猪可以有多只，每只猪扮演一种角色。"><meta property="og:locale" content="zh_CN"><meta property="article:published_time" content="2017-10-10T13:41:16.000Z"><meta property="article:modified_time" content="2023-06-21T08:20:08.038Z"><meta property="article:author" content="NekoMio"><meta property="article:tag" content="模拟"><meta name="twitter:card" content="summary"><meta name="theme-color" content="#5e72e4"><meta name="theme-color-rgb" content="94,114,228"><meta name="theme-color-origin" content="#5e72e4"><meta name="argon-enable-custom-theme-color" content="true"><meta name="theme-card-radius" content="4"><meta name="theme-version" content="1.0.3"><link rel="icon" href="/favicon.ico" type="image/x-icon"><link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"><link rel="stylesheet" href="/assets/argon_css_merged.css"><link rel="stylesheet" href="/style.css"><link rel="stylesheet" href="//fonts.loli.net/css?family=Open+Sans:300,400,600,700|Noto+Serif+SC:300,600&display=swap.css"><script src="/assets/argon_js_merged.js"></script><script src="/assets/js/argon.min.js"></script><script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><link rel="stylesheet" href="//cdn.bootcdn.net/ajax/libs/waline/2.15.5/waline.css"><script src="//cdn.bootcdn.net/ajax/libs/waline/2.15.5/waline.js"></script><script>var argonConfig={language:"zh_CN",zoomify:{duration:200,easing:"cubic-bezier(0.4,0,0,1)",scale:.9},pangu:"true",lazyload:{threshold:800,effect:"fadeIn"},disable_pjax:!1,headroom:!1,comment:!0,waline:null}</script><script>var darkmodeMediaQuery,darkmodeAutoSwitch="false";function setDarkmode(e){1==e?$("html").addClass("darkmode"):$("html").removeClass("darkmode"),$(window).trigger("scroll")}function toggleDarkmode(){$("html").hasClass("darkmode")?(setDarkmode(!1),sessionStorage.setItem("Argon_Enable_Dark_Mode","false")):(setDarkmode(!0),sessionStorage.setItem("Argon_Enable_Dark_Mode","true"))}function toggleDarkmodeByPrefersColorScheme(e){"false"!=sessionStorage.getItem("Argon_Enable_Dark_Mode")&&"true"!=sessionStorage.getItem("Argon_Enable_Dark_Mode")&&(e.matches?setDarkmode(!0):setDarkmode(!1))}function toggleDarkmodeByTime(){var e;"false"!=sessionStorage.getItem("Argon_Enable_Dark_Mode")&&"true"!=sessionStorage.getItem("Argon_Enable_Dark_Mode")&&setDarkmode((e=(new Date).getHours())<7||22<=e)}function toggleAmoledDarkMode(){$("html").toggleClass("amoled-dark"),$("html").hasClass("amoled-dark")?localStorage.setItem("Argon_Enable_Amoled_Dark_Mode","true"):localStorage.setItem("Argon_Enable_Amoled_Dark_Mode","false")}"true"==sessionStorage.getItem("Argon_Enable_Dark_Mode")&&setDarkmode(!0),"system"==darkmodeAutoSwitch&&((darkmodeMediaQuery=window.matchMedia("(prefers-color-scheme: dark)")).addListener(toggleDarkmodeByPrefersColorScheme),toggleDarkmodeByPrefersColorScheme(darkmodeMediaQuery)),"time"==darkmodeAutoSwitch&&toggleDarkmodeByTime(),"alwayson"==darkmodeAutoSwitch&&setDarkmode(!0),"true"==localStorage.getItem("Argon_Enable_Amoled_Dark_Mode")?$("html").addClass("amoled-dark"):"false"==localStorage.getItem("Argon_Enable_Amoled_Dark_Mode")&&$("html").removeClass("amoled-dark")</script><script>-1!==navigator.userAgent.indexOf("Safari")&&-1===navigator.userAgent.indexOf("Chrome")&&$("html").addClass("using-safari")</script><script src="/assets/vendor/smoothscroll/smoothscroll1.js"></script><meta name="generator" content="Hexo 5.4.2"><link rel="alternate" href="/rss2.xml" title="NekoMio's Blog" type="application/rss+xml"></head><style id="themecolor_css">:root{--themecolor:#5e72e4;--themecolor-dark0:#5368E2;--themecolor-dark:#485FE0;--themecolor-dark2:#324CDD;--themecolor-dark3:#233DD2;--themecolor-light:#8A98EB;--themecolor-rgbstr:94,114,228;--themecolor-gradient:linear-gradient(150deg,var(--themecolor-light) 15%, var(--themecolor) 70%, var(--themecolor-dark0) 94%)}</style><style id="theme_cardradius_css">:root{--card-radius:4px}</style><body><div id="toolbar"><header class="header-global"><nav id="navbar-main" class="navbar navbar-main navbar-expand-lg navbar-transparent navbar-light bg-primary headroom--not-bottom headroom--not-top headroom--pinned"><div class="container"><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar_global" aria-controls="navbar_global" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button> <a class="navbar-brand" href="/">NekoMio&#39;s Blog</a><div class="navbar-collapse collapse" id="navbar_global"><div class="navbar-collapse-header"><div class="row"><div class="col-6 collapse-brand"></div><div class="col-6 collapse-close"><button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar_global" aria-controls="navbar_global" aria-expanded="false" aria-label="Toggle navigation"><span></span> <span></span></button></div></div></div><ul id="navbar_search_btn_mobile" class="navbar-nav align-items-lg-center ml-lg-auto"><li class="nav-item" data-toggle="modal" data-target="#argon_search_modal" style="padding-left:5px"><a class="nav-link nav-link-icon"><i class="fa fa-search"></i> <span class="nav-link-inner--text d-lg-none">搜索</span></a></li></ul><ul class="navbar-nav navbar-nav-hover align-items-lg-center"><li class="nav-item"><a href="/" class="nav-link"><i class="ni ni-book-bookmark d-lg-none"></i> <span class="nav-link-inner--text">首页</span></a></li><li class="nav-item"><a href="/archives" class="nav-link"><i class="ni ni-book-bookmark d-lg-none"></i> <span class="nav-link-inner--text">归档</span></a></li></ul><ul class="navbar-nav align-items-lg-center ml-lg-auto"><li class="nav-item" data-toggle="modal" data-target="#argon_search_modal" id="navbar_search_btn_pc"><a class="nav-link nav-link-icon"><i class="fa fa-search"></i> <span class="nav-link-inner--text d-lg-none">搜索</span></a></li></ul></div><div id="navbar_menu_mask" data-toggle="collapse" data-target="#navbar_global"></div></div></nav></header></div><div class="modal fade" id="argon_search_modal" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true"><div class="modal-dialog modal-dialog-centered modal-lg" role="document"><div class="modal-content"><div class="modal-header"><h5 class="modal-title">搜索</h5><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body"><div class="form-group mb-3"><div class="input-group input-group-alternative"><div class="input-group-prepend"><span class="input-group-text"><i class="fa fa-search"></i></span></div><input id="local-search-input" class="form-control" placeholder="搜索什么..." type="text" autocomplete="off" data-search.path="search.xml" data-config.root="/"></div><div id="local-search-result"></div></div></div></div></div></div><section id="banner" class="banner section section-lg section-shaped"><div class="shape shape-style-1 shape-primary"><span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span> <span></span></div><div id="banner_container" class="banner-container container text-center"><div class="banner-title text-white"><span class="banner-title-inner">NekoMio&#39;s Blog</span></div></div><style>section.banner{background-image:url(/assets/img/banner.jpg)!important}</style></section><style>#content:before{content:'';display:block;position:fixed;left:0;right:0;top:0;bottom:0;z-index:-2;background:url(/assets/img/banner.jpg);background-position:center;background-size:cover;background-repeat:no-repeat;opacity:1;transition:opacity .5s ease}html.darkmode #content:before{filter:brightness(.65)}#content:after{content:'';display:block;position:fixed;left:0;right:0;top:0;bottom:0;z-index:-2;background:url(/assets/img/banner.jpg);background-position:center;background-size:cover;background-repeat:no-repeat;opacity:0;transition:opacity .5s ease}html.darkmode #content:after{opacity:1}html.darkmode #content:before{opacity:0}#banner,#banner .shape{background:0 0!important}</style><div id="float_action_buttons" class="float-action-buttons fabtns-unloaded"><button id="fabtn_toggle_sides" class="btn btn-icon btn-neutral fabtn shadow-sm" type="button" aria-hidden="true" tooltip-move-to-left="移至左侧" tooltip-move-to-right="移至右侧"><span class="btn-inner--icon fabtn-show-on-right"><i class="fa fa-caret-left"></i></span> <span class="btn-inner--icon fabtn-show-on-left"><i class="fa fa-caret-right"></i></span></button> <button id="fabtn_back_to_top" class="btn btn-icon btn-neutral fabtn shadow-sm" type="button" aria-label="Back To Top" tooltip="回到顶部"><span class="btn-inner--icon"><i class="fa fa-angle-up"></i></span></button> <button id="fabtn_go_to_comment" class="btn btn-icon btn-neutral fabtn shadow-sm d-none" type="button" aria-label="Comment" tooltip="评论"><span class="btn-inner--icon"><i class="fa fa-comment-o"></i></span></button> <button id="fabtn_toggle_darkmode" class="btn btn-icon btn-neutral fabtn shadow-sm" type="button" aria-label="Toggle Darkmode" tooltip-darkmode="夜间模式" tooltip-blackmode="暗黑模式" tooltip-lightmode="日间模式"><span class="btn-inner--icon"><i class="fa fa-moon-o"></i><i class="fa fa-lightbulb-o"></i></span></button> <button id="fabtn_toggle_blog_settings_popup" class="btn btn-icon btn-neutral fabtn shadow-sm" type="button" aria-label="Open Blog Settings Menu" tooltip="设置"><span class="btn-inner--icon"><i class="fa fa-cog"></i></span></button><div id="fabtn_blog_settings_popup" class="card shadow-sm" style="opacity:0" aria-hidden="true"><div id="close_blog_settings"><i class="fa fa-close"></i></div><div class="blog-setting-item mt-3"><div style="transform:translateY(-4px)"><div id="blog_setting_toggle_darkmode_and_amoledarkmode" tooltip-switch-to-darkmode="切换到夜间模式" tooltip-switch-to-blackmode="切换到暗黑模式"><span>夜间模式</span><span>暗黑模式</span></div></div><div style="flex:1"></div><label id="blog_setting_darkmode_switch" class="custom-toggle"><span class="custom-toggle-slider rounded-circle"></span></label></div><div class="blog-setting-item mt-3"><div style="flex:1">字体</div><div><button id="blog_setting_font_sans_serif" type="button" class="blog-setting-font btn btn-outline-primary blog-setting-selector-left">Sans Serif</button><button id="blog_setting_font_serif" type="button" class="blog-setting-font btn btn-outline-primary blog-setting-selector-right">Serif</button></div></div><div class="blog-setting-item mt-3"><div style="flex:1">阴影</div><div><button id="blog_setting_shadow_small" type="button" class="blog-setting-shadow btn btn-outline-primary blog-setting-selector-left">浅阴影</button><button id="blog_setting_shadow_big" type="button" class="blog-setting-shadow btn btn-outline-primary blog-setting-selector-right">深阴影</button></div></div><div class="blog-setting-item mt-3 mb-3"><div style="flex:1">滤镜</div><div id="blog_setting_filters" class="ml-3"><button id="blog_setting_filter_off" type="button" class="blog-setting-filter-btn ml-0" filter-name="off">关闭</button> <button id="blog_setting_filter_sunset" type="button" class="blog-setting-filter-btn" filter-name="sunset">日落</button> <button id="blog_setting_filter_darkness" type="button" class="blog-setting-filter-btn" filter-name="darkness">暗化</button> <button id="blog_setting_filter_grayscale" type="button" class="blog-setting-filter-btn" filter-name="grayscale">灰度</button></div></div><div class="blog-setting-item mb-3"><div id="blog_setting_card_radius_to_default" style="cursor:pointer" tooltip="恢复默认">圆角</div><div style="flex:1;margin-left:20px;margin-right:8px;transform:translateY(2px)"><div id="blog_setting_card_radius"></div></div></div><div class="blog-setting-item mt-1 mb-3"><div style="flex:1">主题色</div><div id="theme-color-picker" class="ml-3"></div></div></div><button id="fabtn_open_sidebar" class="btn btn-icon btn-neutral fabtn shadow-sm" type="button" aria-label="Open Sidebar Menu" tooltip="菜单"><span class="btn-inner--icon"><i class="fa fa-bars"></i></span></button> <button id="fabtn_reading_progress" class="btn btn-icon btn-neutral fabtn shadow-sm" type="button" aria-hidden="true" tooltip="阅读进度"><div id="fabtn_reading_progress_bar" style="width:0%"></div><span id="fabtn_reading_progress_details">0%</span></button></div><div id="content" class="site-content"><script async src="https://www.googletagmanager.com/gtag/js?id=G-T9TWLDVQ6L"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-T9TWLDVQ6L")</script><div class="page-information-card-container"></div><div id="sidebar_mask"></div><aside id="leftbar" class="leftbar widget-area" role="complementary"><div id="leftbar_part1" class="widget widget_search card bg-white shadow-sm border-0"><div class="leftbar-banner card-body"><span class="leftbar-banner-title text-white">NekoMio&#39;s Blog</span> <span class="leftbar-banner-subtitle text-white"><span class="hitokoto"></span></span></div><ul id="leftbar_part1_menu" class="leftbar-menu"><li class="leftbar-menu-item"><a href="/">首页</a></li><li class="leftbar-menu-item"><a href="/archives">归档</a></li></ul><div class="card-body text-center leftbar-search-button"><button id="leftbar_search" class="btn btn-secondary btn-lg active btn-sm btn-block border-0" role="button" data-toggle="modal" data-target="#argon_search_modal"><i class="menu-item-icon fa fa-search mr-0"></i> 搜索</button></div></div><div id="leftbar_part2" class="widget widget_search card bg-white shadow-sm border-0"><div id="leftbar_part2_inner" class="card-body"><div class="nav-wrapper" style="padding-top:5px"><ul class="nav nav-pills nav-fill" role="tablist"><li class="nav-item sidebar-tab-switcher"><a class="active show" id="leftbar_tab_catalog_btn" data-toggle="tab" href="#leftbar_tab_catalog" role="tab" aria-controls="leftbar_tab_catalog" no-pjax>文章目录</a></li><li class="nav-item sidebar-tab-switcher"><a id="leftbar_tab_overview_btn" data-toggle="tab" href="#leftbar_tab_overview" role="tab" aria-controls="leftbar_tab_overview" no-pjax>站点概览</a></li></ul></div><div><div class="tab-content" style="padding:10px 10px 0 10px"><div class="tab-pane fade active show" id="leftbar_tab_catalog" role="tabpanel" aria-labelledby="leftbar_tab_catalog_btn"><div id="leftbar_catalog"></div><script>$(function(){$(document).headIndex({articleWrapSelector:"#post_content",indexBoxSelector:"#leftbar_catalog",subItemBoxClass:"index-subItem-box",itemClass:"index-item",linkClass:"index-link",offset:80})})</script><style>#leftbar_catalog ul{counter-reset:blog_catalog_number}#leftbar_catalog li.index-item>a:before{content:counters(blog_catalog_number, '.') " ";counter-increment:blog_catalog_number}</style></div><div class="tab-pane fade text-center" id="leftbar_tab_overview" role="tabpanel" aria-labelledby="leftbar_tab_overview_btn"><img id="leftbar_overview_author_image" src="/null.webp" class="img-fluid rounded-circle shadow-sm" style="width:100px" alt="avatar"><h6 id="leftbar_overview_author_name">NekoMio</h6><nav class="site-state"><div class="site-state-item site-state-posts"><a href="/archives"><span class="site-state-item-count">159</span> <span class="site-state-item-name">文章</span></a></div><div class="site-state-item site-state-categories"><a data-toggle="modal" data-target="#blog_categories"><span class="site-state-item-count">7</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"><a data-toggle="modal" data-target="#blog_tags"><span class="site-state-item-count">68</span> <span class="site-state-item-name">标签</span></a></div></nav><div class="site-author-links"><div class="site-author-links-item"><a href="https://github.com/NekoMio" rel="noopener" target="_blank">Github</a></div><div class="site-author-links-item"><a href="https://space.bilibili.com/11558109" rel="noopener" target="_blank">BiliBili</a></div></div><div class="site-friend-links"><div class="site-friend-links-title"><i class="fa fa-fw fa-link"></i> Links</div><ul class="site-friend-links-ul"><li class="site-friend-links-item"><a href="https://al0ha0e.github.io" rel="noopener" target="_blank">Al0ha0e</a></li><li class="site-friend-links-item"><a href="http://icontofig.leanote.com/" rel="noopener" target="_blank">icontofig</a></li><li class="site-friend-links-item"><a href="https://128bit.top" rel="noopener" target="_blank">Duxeran</a></li><li class="site-friend-links-item"><a href="https://zhuohao.me" rel="noopener" target="_blank">YZH</a></li></ul></div></div></div></div></div></div></aside><div class="modal fade" id="blog_categories" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true"><div class="modal-dialog modal-dialog-centered"><div class="modal-content"><div class="modal-header"><h5 class="modal-title">分类</h5><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body"><a class="badge badge-secondary tag" href="/categories/%E5%9B%BE%E5%BA%93/Test/" rel="tag">Test <span class="tag-num">1</span></a><a class="badge badge-secondary tag" href="/categories/%E5%9B%BE%E5%BA%93/" rel="tag">图库 <span class="tag-num">1</span></a><a class="badge badge-secondary tag" href="/categories/%E7%94%9F%E6%B4%BB/" rel="tag">生活 <span class="tag-num">1</span></a><a class="badge badge-secondary tag" href="/categories/%E7%9F%A5%E8%AF%86%E7%82%B9/" rel="tag">知识点 <span class="tag-num">2</span></a><a class="badge badge-secondary tag" href="/categories/%E7%AC%94%E8%AE%B0/" rel="tag">笔记 <span class="tag-num">10</span></a><a class="badge badge-secondary tag" href="/categories/%E9%9A%8F%E7%AC%94/" rel="tag">随笔 <span class="tag-num">7</span></a><a class="badge badge-secondary tag" href="/categories/%E9%A2%98%E8%A7%A3/" rel="tag">题解 <span class="tag-num">137</span></a></div></div></div></div><div class="modal fade" id="blog_tags" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true"><div class="modal-dialog modal-dialog-centered"><div class="modal-content"><div class="modal-header"><h5 class="modal-title">标签</h5><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body"><a class="badge badge-secondary tag" href="/tags/2-SAT/" rel="tag">2-SAT <span class="tag-num">1</span></a><a class="badge badge-secondary tag" href="/tags/AC%E8%87%AA%E5%8A%A8%E6%9C%BA/" rel="tag">AC自动机 <span class="tag-num">1</span></a><a class="badge badge-secondary tag" href="/tags/BFS/" rel="tag">BFS <span class="tag-num">2</span></a><a class="badge badge-secondary tag" href="/tags/CDQ/" rel="tag">CDQ <span class="tag-num">4</span></a><a class="badge badge-secondary tag" href="/tags/DP/" rel="tag">DP <span class="tag-num">13</span></a><a class="badge badge-secondary tag" href="/tags/FFT/" rel="tag">FFT <span class="tag-num">1</span></a><a class="badge badge-secondary tag" href="/tags/FFT-NTT/" rel="tag">FFT&NTT <span class="tag-num">7</span></a><a class="badge badge-secondary tag" href="/tags/FWT/" rel="tag">FWT <span class="tag-num">1</span></a><a class="badge badge-secondary tag" href="/tags/KD-Tree/" rel="tag">KD-Tree <span class="tag-num">2</span></a><a class="badge badge-secondary tag" href="/tags/KMP/" rel="tag">KMP <span class="tag-num">3</span></a><a class="badge badge-secondary tag" href="/tags/LCA/" rel="tag">LCA <span class="tag-num">1</span></a><a class="badge badge-secondary tag" href="/tags/SPFA/" rel="tag">SPFA <span class="tag-num">1</span></a><a class="badge badge-secondary tag" href="/tags/STL/" rel="tag">STL <span class="tag-num">1</span></a><a class="badge badge-secondary tag" href="/tags/Tarjan/" rel="tag">Tarjan <span class="tag-num">2</span></a><a class="badge badge-secondary tag" href="/tags/Treap/" rel="tag">Treap <span class="tag-num">4</span></a><a class="badge badge-secondary tag" href="/tags/Trie/" rel="tag">Trie <span class="tag-num">4</span></a><a class="badge badge-secondary tag" href="/tags/dfs/" rel="tag">dfs <span class="tag-num">5</span></a><a class="badge badge-secondary tag" href="/tags/fail%E6%A0%91/" rel="tag">fail树 <span class="tag-num">1</span></a><a class="badge badge-secondary tag" href="/tags/hash/" rel="tag">hash <span class="tag-num">3</span></a><a class="badge badge-secondary tag" href="/tags/%E4%B8%BB%E5%B8%AD%E6%A0%91/" rel="tag">主席树 <span class="tag-num">1</span></a><a class="badge badge-secondary tag" href="/tags/%E4%B9%B1%E6%90%9E/" rel="tag">乱搞 <span class="tag-num">6</span></a><a class="badge badge-secondary tag" href="/tags/%E4%BA%8C%E5%88%86/" rel="tag">二分 <span class="tag-num">1</span></a><a class="badge badge-secondary tag" href="/tags/%E4%BA%8C%E5%88%86%E5%9B%BE%E5%8C%B9%E9%85%8D/" rel="tag">二分图匹配 <span class="tag-num">1</span></a><a class="badge badge-secondary tag" href="/tags/%E4%BA%8C%E5%88%86%E7%AD%94%E6%A1%88/" rel="tag">二分答案 <span class="tag-num">2</span></a><a class="badge badge-secondary tag" href="/tags/%E4%BA%8C%E7%BB%B4SPFA/" rel="tag">二维SPFA <span class="tag-num">1</span></a><a class="badge badge-secondary tag" href="/tags/%E4%BA%A4%E4%BA%92/" rel="tag">交互 <span class="tag-num">1</span></a><a class="badge badge-secondary tag" href="/tags/%E4%BD%8D%E8%BF%90%E7%AE%97/" rel="tag">位运算 <span class="tag-num">1</span></a><a class="badge badge-secondary tag" href="/tags/%E5%85%B6%E4%BB%96/" rel="tag">其他 <span class="tag-num">2</span></a><a class="badge badge-secondary tag" href="/tags/%E5%88%86%E5%9D%97/" rel="tag">分块 <span class="tag-num">6</span></a><a class="badge badge-secondary tag" href="/tags/%E5%8C%BA%E9%97%B4DP/" rel="tag">区间DP <span class="tag-num">1</span></a><a class="badge badge-secondary tag" href="/tags/%E5%8D%8A%E5%B9%B3%E9%9D%A2%E4%BA%A4/" rel="tag">半平面交 <span class="tag-num">1</span></a><a class="badge badge-secondary tag" href="/tags/%E5%8D%9A%E5%BC%88%E8%AE%BA/" rel="tag">博弈论 <span class="tag-num">4</span></a><a class="badge badge-secondary tag" href="/tags/%E5%8F%AF%E6%8C%81%E4%B9%85%E5%8C%96/" rel="tag">可持久化 <span class="tag-num">3</span></a><a class="badge badge-secondary tag" href="/tags/%E5%8F%AF%E6%8C%81%E4%B9%85%E5%8C%96Trie%E6%A0%91/" rel="tag">可持久化Trie树 <span class="tag-num">2</span></a><a class="badge badge-secondary tag" href="/tags/%E5%90%8E%E7%BC%80%E6%95%B0%E7%BB%84/" rel="tag">后缀数组 <span class="tag-num">1</span></a><a class="badge badge-secondary tag" href="/tags/%E5%9B%BE%E5%BA%93/" rel="tag">图库 <span class="tag-num">1</span></a><a class="badge badge-secondary tag" href="/tags/%E5%B9%B3%E8%A1%A1%E6%A0%91/" rel="tag">平衡树 <span class="tag-num">1</span></a><a class="badge badge-secondary tag" href="/tags/%E5%B9%B6%E6%9F%A5%E9%9B%86/" rel="tag">并查集 <span class="tag-num">1</span></a><a class="badge badge-secondary tag" href="/tags/%E6%8F%92%E5%A4%B4DP/" rel="tag">插头DP <span class="tag-num">1</span></a><a class="badge badge-secondary tag" href="/tags/%E6%95%B0%E5%AD%A6/" rel="tag">数学 <span class="tag-num">6</span></a><a class="badge badge-secondary tag" href="/tags/%E6%95%B0%E8%AE%BA/" rel="tag">数论 <span class="tag-num">2</span></a><a class="badge badge-secondary tag" href="/tags/%E6%97%A0%E6%97%8BTreap/" rel="tag">无旋Treap <span class="tag-num">1</span></a><a class="badge badge-secondary tag" href="/tags/%E6%97%A5%E8%AE%B0/" rel="tag">日记 <span class="tag-num">6</span></a><a class="badge badge-secondary tag" href="/tags/%E6%9A%B4%E5%8A%9B/" rel="tag">暴力 <span class="tag-num">2</span></a><a class="badge badge-secondary tag" href="/tags/%E6%9C%80%E5%B0%8F%E7%94%9F%E6%88%90%E6%A0%91/" rel="tag">最小生成树 <span class="tag-num">1</span></a><a class="badge badge-secondary tag" href="/tags/%E6%9D%83%E5%80%BC%E6%A0%91%E7%8A%B6%E6%95%B0%E7%BB%84/" rel="tag">权值树状数组 <span class="tag-num">1</span></a><a class="badge badge-secondary tag" href="/tags/%E6%A0%88/" rel="tag">栈 <span class="tag-num">1</span></a><a class="badge badge-secondary tag" href="/tags/%E6%A0%91DP/" rel="tag">树DP <span class="tag-num">2</span></a><a class="badge badge-secondary tag" href="/tags/%E6%A0%91%E5%A5%97%E6%A0%91/" rel="tag">树套树 <span class="tag-num">1</span></a><a class="badge badge-secondary tag" href="/tags/%E6%A0%91%E7%8A%B6%E6%95%B0%E7%BB%84/" rel="tag">树状数组 <span class="tag-num">1</span></a><a class="badge badge-secondary tag" href="/tags/%E6%A0%91%E8%B4%AA%E5%BF%83/" rel="tag">树贪心 <span class="tag-num">1</span></a><a class="badge badge-secondary tag" href="/tags/%E6%A6%82%E7%8E%87DP/" rel="tag">概率DP <span class="tag-num">13</span></a><a class="badge badge-secondary tag" href="/tags/%E6%A8%A1%E6%8B%9F/" rel="tag">模拟 <span class="tag-num">2</span></a><a class="badge badge-secondary tag" href="/tags/%E6%AC%A7%E6%8B%89%E5%AE%9A%E7%90%86/" rel="tag">欧拉定理 <span class="tag-num">1</span></a><a class="badge badge-secondary tag" href="/tags/%E7%82%B9%E5%88%86%E6%B2%BB/" rel="tag">点分治 <span class="tag-num">1</span></a><a class="badge badge-secondary tag" href="/tags/%E7%8A%B6%E5%8E%8BDP/" rel="tag">状压DP <span class="tag-num">5</span></a><a class="badge badge-secondary tag" href="/tags/%E7%94%9F%E6%88%90%E5%87%BD%E6%95%B0/" rel="tag">生成函数 <span class="tag-num">5</span></a><a class="badge badge-secondary tag" href="/tags/%E7%9F%A9%E9%98%B5%E4%B9%98/" rel="tag">矩阵乘 <span class="tag-num">5</span></a><a class="badge badge-secondary tag" href="/tags/%E7%BA%BF%E6%80%A7%E8%A7%84%E5%88%92/" rel="tag">线性规划 <span class="tag-num">1</span></a><a class="badge badge-secondary tag" href="/tags/%E7%BA%BF%E6%AE%B5%E6%A0%91/" rel="tag">线段树 <span class="tag-num">5</span></a><a class="badge badge-secondary tag" href="/tags/%E7%BB%84%E5%90%88/" rel="tag">组合 <span class="tag-num">1</span></a><a class="badge badge-secondary tag" href="/tags/%E7%BD%91%E7%BB%9C%E6%B5%81/" rel="tag">网络流 <span class="tag-num">6</span></a><a class="badge badge-secondary tag" href="/tags/%E7%BE%A4%E8%AE%BA/" rel="tag">群论 <span class="tag-num">3</span></a><a class="badge badge-secondary tag" href="/tags/%E8%8E%AB%E6%AF%94%E4%B9%8C%E6%96%AF%E5%8F%8D%E6%BC%94/" rel="tag">莫比乌斯反演 <span class="tag-num">4</span></a><a class="badge badge-secondary tag" href="/tags/%E8%AE%A1%E7%AE%97%E5%87%A0%E4%BD%95/" rel="tag">计算几何 <span class="tag-num">1</span></a><a class="badge badge-secondary tag" href="/tags/%E8%B4%AA%E5%BF%83/" rel="tag">贪心 <span class="tag-num">6</span></a><a class="badge badge-secondary tag" href="/tags/%E8%B4%B9%E7%94%A8%E6%B5%81/" rel="tag">费用流 <span class="tag-num">2</span></a><a class="badge badge-secondary tag" href="/tags/%E9%AB%98%E6%96%AF%E6%B6%88%E5%85%83/" rel="tag">高斯消元 <span class="tag-num">6</span></a></div></div></div></div><div id="primary" class="content-area"><main id="main" class="site-main" role="main"><article class="post post-full card bg-white shadow-sm border-0 post-preview"><header class="post-header text-center"><a class="post-title" href="/2017/10/10/113/">BZOJ 1972 [Sdoi2010]猪国杀</a><div class="post-meta"><div class="post-meta-detail post-meta-detail-time"><i class="fa fa-clock-o" aria-hidden="true"></i> <time title="发布于 2017-10-10 21:41:16 | 编辑于 2023-6-21 16:20:08">2017-10-10 21:41</time></div><div class="post-meta-devide">|</div><div class="post-meta-detail post-meta-detail-categories"><i class="fa fa-bookmark-o" aria-hidden="true"></i> <a class="post-meta-detail-catagory-link" href="/categories/%E9%A2%98%E8%A7%A3/">题解</a></div><div class="post-meta-devide">|</div><div class="post-meta-detail post-meta-detail-words"><i class="fa fa fa-book" aria-hidden="true"></i> <span id="busuanzi_container_page_pv">阅读<span id="busuanzi_value_page_pv"></span>次</span></div><div class="post-meta-devide">|</div><div class="post-meta-detail post-meta-detail-words"><i class="fa fa-file-word-o" aria-hidden="true"></i> 4.6k 字</div><div class="post-meta-devide">|</div><div class="post-meta-detail post-meta-detail-readingtime"><i class="fa fa-hourglass-end" aria-hidden="true"></i> 22 分钟</div></div></header><div class="post-content" id="post_content"><ul><li><p>概述</p><ul><li>《猪国杀》是一种多猪牌类回合制游戏，一共有三种角色：主猪，忠猪，反猪。</li><li>每局游戏主猪有且只有一只，忠猪和反猪可以有多只，每只猪扮演一种角色。<span id="more"></span></li></ul></li><li><p>游戏目的</p><ul><li>主猪（MP）：自己存活的情况下消灭所有的反猪。</li><li>忠猪（ZP）：不惜一切保护主猪，胜利条件与主猪相同。</li><li>反猪（FP）：杀死主猪。</li></ul></li><li><p>游戏过程</p><ul><li>游戏开始时候，每个玩家手里都会有 4 张牌，且体力上限和初始体力都是 4 。</li><li>开始游戏时，从主猪开始，按照逆时针方向（数据中就是按照编号从 1, 2, 3…n, 1… 的顺序）依次行动。</li><li>每个玩家自己的回合可以分为 4 个阶段<ul><li>摸牌阶段<ul><li>从牌堆顶部摸两张牌，依次放到手牌的最右边。</li></ul></li><li>出牌阶段<ul><li>你可以使用 0 张到任意张牌，每次使用牌的时候都使用最靠左的能够使用的牌。</li><li>当然，要满足如下规则<ul><li>如果没有猪哥连弩，每个出牌阶段只能使用一次“杀”来攻击。</li><li>任何牌被使用后被弃置（武器是装备上）。</li><li>被弃置的牌以后都不能再用，即与游戏无关。</li></ul></li></ul></li></ul></li></ul></li><li><p>各种牌介绍</p><ul><li>每张手牌用一个字母表示，字母代表牌的种类。</li><li>基本牌<ul><li>『桃(P)』<ul><li>在自己的回合内，如果自己的体力值不等于体力上限，那么使用一个桃可以为自己补充一点体力；否则不能使用桃。<br>桃只能对自己使用。</li><li>在自己的回合外，如果自己的血变为 0 或者更低，那么也可以使用。</li></ul></li><li>『杀(K)』<ul><li>在自己的回合内，对攻击范围内除自己以外的一名角色使用。</li><li>如果没有被『闪』抵消，则造成 1 点伤害。</li><li>无论有无武器，杀的攻击范围都是 1。</li></ul></li><li>『闪(D)』<ul><li>当你受到杀的攻击时，可以弃置一张闪来抵消杀的效果。</li></ul></li></ul></li><li>锦囊牌<ul><li>『决斗(F)』<ul><li>出牌阶段，对除自己以外任意一名角色使用，由目标角色先开始，自己和目标角色轮流弃置一张杀，首先没有杀可弃的一方受到1点伤害，另一方视为此伤害的来源。</li></ul></li><li>『南猪入侵(N)』<ul><li>出牌阶段，对除你以外所有角色使用，按逆时针顺序从使用者下家开始依次结算，除非弃置一张杀，否则受到1点伤害。</li></ul></li><li>『万箭齐发(W)』<ul><li>和南猪入侵类似，不过要弃置的不是杀而是闪。</li></ul></li><li>『无懈可击(J)』<ul><li>在目标锦囊生效前抵消其效果。</li><li>每次有一张锦囊即将生效时，从使用这张锦囊的猪开始，按照逆时针顺序，依次得到使用无懈可击的机会。</li><li>效果<ul><li>用于决斗时，决斗无效并弃置。</li><li>用于南猪入侵或万箭齐发时，当结算到某个角色时才能使用，当前角色不需弃置牌并且不会受到伤害（仅对一个角色产生效果）。</li><li>用于无懈可击时，成为目标的无懈可击被无效。</li></ul></li></ul></li></ul></li><li>装备牌<ul><li>『猪哥连弩(Z)』<ul><li>武器，攻击范围 1，出牌阶段你可以使用任意张杀。<br>同一时刻最多只能装一个武器。</li><li>如果先前已经有了一把武器，那么之后再装武器的话，会弃置以前的武器来装现在的武器。</li></ul></li></ul></li></ul></li><li><p>特殊事件及概念解释</p><ul><li>伤害来源<ul><li>杀、南猪入侵、万箭齐发的伤害来源均是使用该牌的猪。</li><li>决斗的伤害来源如上。</li></ul></li><li>距离<ul><li>两只猪的距离定义为沿着逆时针方向间隔的猪数 +1。即初始时 1 和 2 的距离为 1 ，但是 2 和 1 的距离就是 n - 1 。</li><li>注意一个角色的死亡会导致一些猪距离的改变。</li></ul></li><li>玩家死亡<ul><li>如果该玩家的体力降到 0 或者更低，并且自己手中没有足够的桃使得自己的体力值回到 1，那么就死亡了，死亡后所有的牌（装备区，手牌区）被弃置、</li></ul></li><li>奖励与惩罚<ul><li>反猪死亡时，最后一个伤害来源处（即使是反猪）立即摸三张牌。</li><li>忠猪死亡时，如果最后一个伤害来源是主猪，那么主猪所有装备牌、手牌被弃置。</li><li>注意，一旦达成胜利条件，游戏立刻结束，因此即使会摸 3 张牌或者还有牌可以用也不用执行了。</li></ul></li></ul></li><li><p>现在，我们已经知道每只猪的角色、手牌，还有牌堆初始情况，并且假设每个角色会按照如下的行为准则进行游戏，你需要做的就是告诉小猪 iPig 最后的结果。</p></li><li><p>几种行为</p><ul><li>献殷勤<ul><li>使用无懈可击挡下南猪入侵、万箭齐发、决斗。</li><li>使用无懈可击抵消表敌意。</li></ul></li><li>表敌意<ul><li>对某个角色使用杀、决斗。</li><li>使用无懈可击抵消献殷勤。</li></ul></li><li>跳忠<ul><li>即通过行动表示自己是忠猪。</li><li>跳忠行动就是对主猪或对某只已经跳忠的猪献殷勤，或者对某只已经跳反的猪表敌意。</li></ul></li><li>跳反<ul><li>即通过行动表示自己是反猪。</li><li>跳反行动就是对主猪或对某只已经跳忠的猪表敌意，或者对某只已经跳反的猪献殷勤。</li><li>忠猪不会跳反，反猪也不会跳忠。</li><li>不管是忠猪还是反猪，能够跳必然跳。</li></ul></li></ul></li><li><p>行动准则</p><ul><li>共性<ul><li>每个角色如果手里有桃且生命值未满，那么必然吃掉。</li><li>有南猪入侵、万箭齐发、必然使用。</li><li>有装备必然装上。</li><li>受到杀时，有闪必然弃置。</li><li>响应南猪入侵或者万箭齐发时候，有杀/闪必然弃置。</li><li>不会对未表明身份的猪献殷勤（包括自己）。</li></ul></li><li>特性<ul><li>主猪<ul><li>主猪会认为没有跳身份，且用南猪入侵/万箭齐发对自己造成伤害的猪是“类反猪”（没伤害到不算，注意“类反猪”并没有表明身份），如果之后跳了，那么主猪会重新认识这只猪。<br>对于每种表敌意的方式，对逆时针方向能够执行到的第一只“类反猪”或者已跳反猪表；如果没有，那么就不表敌意。<br>决斗时会不遗余力弃置杀。</li><li>如果能对已经跳忠的猪或自己献殷勤，那么一定献。</li><li>如果能够对已经跳反的猪表敌意，那么一定表。</li></ul></li><li>忠猪<ul><li>对于每种表敌意的方式，对逆时针方向能够执行到的第一只已经跳反的猪表；如果没有，那么就不表敌意。</li><li>决斗时，如果对方是主猪，那么不会弃置杀，否则，会不遗余力弃置杀。</li><li>如果有机会对主猪或者已经跳忠的猪献殷勤，那么一定献。</li></ul></li><li>反猪<ul><li>对于每种表敌意的方式，如果有机会则对主猪表，否则，对逆时针方向能够执行到的第一只已经跳忠的猪表；如果没有，那么就不表敌意。</li><li>决斗时会不遗余力弃置杀。</li><li>如果有机会对已经跳反的猪献殷勤，那么一定献。</li></ul></li></ul></li></ul></li><li><p>限于 iPig 只会用 P++ 语言写 A + B，他请你用 Pigcal(Pascal)、P(C) 或 P++(C++) 语言来帮他预测最后的结果。</p></li><li><p>输入</p><ul><li>第一行包含两个正整数n(2 &lt;= n &lt;= 10) 和m( m &lt;= 2000)，分别代表玩家数和牌堆中牌的数量。</li><li>接下来n行，每行5个字符串，依次表示对第i只猪的角色和初始4张手牌描述。</li><li>编号为1的肯定是主猪。</li><li>再接下来一行，一共m个字符串，按照从牌堆顶部到牌堆底部的顺序描述每张牌</li><li>所有的相邻的两个字符串都严格用1个空格隔开，行尾没有多余空格。​</li></ul></li><li><p>输出</p><ul><li>输出数据第一行包含一个字符串代表游戏结果。<ul><li>如果是主猪胜利<ul><li>那么输出“MP”</li><li>否则输出“FP”。</li></ul></li></ul></li><li>接下来n行，第i行是对第i只猪的手牌描述<ul><li>按照手牌从左往右的顺序输出</li><li>相邻两张牌用一个空格隔开，行末尾没有多余空格</li><li>如果这只猪已阵亡，那么只要输出“DEAD”即可。</li><li>注意如果要输出手牌而没有手牌的话，那么只需输出一个空行。</li></ul></li></ul></li><li><p>样例输入</p><p>3 10<br>MP D D F F<br>ZP N N N D<br>FP J J J J<br>F F D D J J F F K D</p></li><li><p>样例输出</p><p>FP<br>DEAD<br>DEAD<br>J J J J J D</p></li></ul><h3 id="题解"><a href="#题解" class="headerlink" title="题解"></a>题解</h3><p>题目就是题解</p><pre><code class="c++">#include &lt;cstdio&gt;
#include &lt;cstring&gt;
#include &lt;iostream&gt;
#include &lt;algorithm&gt;
#include &lt;list&gt;
#include &lt;cstdlib&gt;
int n, m, T, D_F, Z_D_to_M;
char C[2005];
// #define Log 1
namespace Pig
&#123;
    bool Died[11];
    struct Pig_data
    &#123;
        /*
        Id :
            1: 主猪
            2: 忠猪
            3: 反猪
        */
        std::list&lt;char&gt; Card;
        std::list&lt;char&gt;::iterator it, it2;
        int Identity, Strength;
        bool Equipped, Jump, Similar;
        void init(int Id, char *s)
        &#123;
            Strength = 4, Similar = 0;
            Identity = Id;
            if (Id == 1) Jump = 1;
            for (int i = 1; i &lt;= 4; i++)
                Card.push_back(s[i]);
        &#125;
        void Print(int i)
        &#123;
            it2 = Card.end();
            if (it2 == Card.begin()) 
            &#123;
                if(i != n)
                    printf(&quot;\n&quot;);
                return;
            &#125;
            it2--;
            for (it = Card.begin(); it != it2; it++)
                printf(&quot;%c &quot;, *it);
            printf(&quot;%c&quot;, *it2);
            if(i != n) printf (&quot;\n&quot;);
        &#125;
    &#125;Pig[11];

&#125;
namespace Card
&#123;
    struct Card_Heap_data
    &#123;
        char Card_Heap[2005];
        int h, t;
        void init(char *s, int Num)
        &#123;
            t = Num;
            h = 0;
            for (int i = 1; i &lt;= Num; i++)
                Card_Heap[i] = s[i];
        &#125;
        char Get_Card()
        &#123;
            if (h == t)
                return Card_Heap[h];
            else
                return Card_Heap[++h];
        &#125;
    &#125;Card;
&#125;
namespace Main
&#123;
void Read_init()
&#123;
    #ifdef Log
        printf(&quot;===========================================\n Read Start\n=================================\n&quot;);
    #endif
    scanf(&quot;%d%d&quot;, &amp;::n ,&amp;::m);
    char s[5], ID[4];
    for (int i = 1; i &lt;= n; i++)
    &#123;
        scanf (&quot;%s&quot;, ID);
        for (int j = 1; j &lt;= 4; j++)
            std::cin &gt;&gt; s[j];
        if (ID[0] == &#39;M&#39;)
            Pig::Pig[i].init(1, s);
        else if (ID[0] == &#39;Z&#39;)
            Pig::Pig[i].init(2, s);
        else
            Pig::Pig[i].init(3, s), T++;
    &#125;
#ifdef Log
    printf(&quot;===========================================\n Read Pig Succeed\n=================================\n&quot;);
#endif
    memset(Pig::Died, 0, sizeof(Pig::Died));
    for (int i = 1; i &lt;= m; i++)
        std::cin &gt;&gt; C[i];
    #ifdef Log
        printf(&quot;===========================================\n Read Card Succeed\n=================================\n&quot;);
    #endif
    Card::Card.init(C, m);
#ifdef Log
    printf(&quot;===========================================\nCard Init Succeed\n=================================\n&quot;);
#endif
&#125;
void Get_Card(int x, int t)
&#123;
#ifdef Log
    printf(&quot;Pig %d Get %d Card\n&quot;, x, t);
#endif
    while (t--)
    &#123;
        Pig::Pig[x].Card.push_back(Card::Card.Get_Card());
    &#125;
&#125;
int nxt[11];
int next(int x)
&#123;
    if (nxt[x] != 0) return nxt[x];
    for (int i = x + 1; ; i++)
    &#123;
        if (i == n + 1) i = 1;
        if (!Pig::Died[i]) 
            return nxt[x] = i;
    &#125;
&#125;
std::list&lt;char&gt;::iterator it, it2, searchit, eraseit;
bool Over(int &amp;W)
&#123;
    bool No_Fan = 1;
    int now = 0;
    if (Pig::Died[1]) return W = 1, 1;
    else now = 1;
    int Next_Pig = now;
    do
    &#123;
        if (Pig::Pig[Next_Pig].Identity == 3) No_Fan = 0;
        Next_Pig = next(Next_Pig);
    &#125;while (Next_Pig != now);
    if (No_Fan)
        return W = 0, 1;
    else
        return 0;
&#125;
bool Judge(int x, char c, int K_Num, int &amp;t)
&#123;
    if (c == &#39;P&#39;) 
    &#123;
        if (Pig::Pig[x].Strength != 4)
            return t = x, 1;
        else return 0;
    &#125;
    else if (c == &#39;K&#39;)
    &#123;
        if (K_Num &amp;&amp; !Pig::Pig[x].Equipped) return 0;
        if (Pig::Pig[x].Identity == 1)
        &#123;
            if (Pig::Pig[next(x)].Similar) return t = next(x), 1;
            if (Pig::Pig[next(x)].Identity == 3 &amp;&amp; Pig::Pig[next(x)].Jump)
                return t = next(x), 1;
            else return 0;
        &#125;
        else if (Pig::Pig[x].Identity == 2)
        &#123;
            if (Pig::Pig[next(x)].Identity == 3 &amp;&amp; Pig::Pig[next(x)].Jump)
                return t = next(x), 1;
            else return 0;
        &#125;
        else if (Pig::Pig[x].Identity == 3)
        &#123;
            if ((Pig::Pig[next(x)].Identity == 1 || Pig::Pig[next(x)].Identity == 2) &amp;&amp; Pig::Pig[next(x)].Jump)
                return t = next(x), 1;
            else return 0;
        &#125;
        else
        &#123;
            printf (&quot;ERROR No Identity\n&quot;);
        &#125;
    &#125; 
    else if (c == &#39;D&#39;) return 0;
    else if (c == &#39;F&#39;)
    &#123;
        bool flag = 0;
        int Next_Pig = next(x);
        while (Next_Pig != x)
        &#123;
            if (Pig::Pig[x].Identity == 1)
            &#123;
                if (Pig::Pig[Next_Pig].Similar) return t = Next_Pig, 1;
                if (Pig::Pig[Next_Pig].Identity == 3 &amp;&amp; Pig::Pig[Next_Pig].Jump)
                    return t = Next_Pig, 1;
                else goto Restart;
            &#125;
            else if (Pig::Pig[x].Identity == 2)
            &#123;
                if (Pig::Pig[Next_Pig].Identity == 3 &amp;&amp; Pig::Pig[Next_Pig].Jump)
                    return t = Next_Pig, 1;
                else goto Restart;
            &#125;
            else if (Pig::Pig[x].Identity == 3)
            &#123;
                if (Pig::Pig[Next_Pig].Identity == 1)
                    return t = Next_Pig, 1;
                else if (Pig::Pig[Next_Pig].Identity == 2 &amp;&amp; Pig::Pig[Next_Pig].Jump) 
                &#123;
                    if (!flag) flag = 1, t = Next_Pig;
                    goto Restart;
                &#125;
                else goto Restart;
            &#125;
            else
            &#123;
                printf (&quot;ERROR No Identity\n&quot;);
            &#125;
            Restart: Next_Pig = next(Next_Pig);
        &#125;
        if (Pig::Pig[x].Identity == 3 &amp;&amp; flag) return 1;
        else return 0;
    &#125;
    else if (c == &#39;N&#39; || c == &#39;W&#39;)
    &#123;
        return t = -1, 1;
    &#125;
    else if (c == &#39;J&#39;)
        return 0;
    else if (c == &#39;Z&#39;)
        return t = x, 1;
    else
    &#123;
        printf (&quot;ERROR in Card ID\n&quot;);
        exit(0);
        return 0;
    &#125;
    return 0;
&#125;
bool Have(char c, int t)// and erase
&#123;
    #ifdef Log
        printf(&quot;It&#39;s %d to return He have &quot;, t);
        Pig::Pig[t].Print();
    #endif
    for (searchit = Pig::Pig[t].Card.begin(); searchit != Pig::Pig[t].Card.end(); searchit++)
        if (*searchit == c)
        &#123;
            #ifdef Log
                printf(&quot;Pig %d Used %c\n&quot;, t, c);
            #endif
            return Pig::Pig[t].Card.erase(searchit), 1;
        &#125;
    return 0;
&#125;
bool Need_Wuxie(int x)
&#123;
    if (!Have(&#39;J&#39;, x)) return 0;
    Pig::Pig[x].Jump = 1;
    Pig::Pig[x].Similar = 0;
    return 1;
&#125;
bool Wuxie(int x, bool op)
&#123;
    int Next_Pig = x;
    do
    &#123;
        if ((op == 0 &amp;&amp; Pig::Pig[Next_Pig].Identity == 3) || (op == 1 &amp;&amp; Pig::Pig[Next_Pig].Identity != 3))
        &#123;
            if (!Need_Wuxie(Next_Pig)) goto again;
            if (!Wuxie(Next_Pig, op ^ 1)) return 1;
            return 0;
        &#125;
        again: Next_Pig = next(Next_Pig);
    &#125;while (Next_Pig != x);
    return 0;
&#125;
bool Okforwuxie(int x, int t)
&#123;
    if (!Pig::Pig[t].Jump) return 0;
    if (Pig::Pig[t].Identity == 3) return Wuxie(x, 0);
    else return Wuxie(x, 1);
&#125;
void UseM(int x, char c, int t)
&#123;
    if (c == &#39;K&#39;)
    &#123;
        #ifdef Log
            printf(&quot;Pig %d use %c to %d\n&quot;, x, c, t);
        #endif
        if (Pig::Pig[t].Jump) Pig::Pig[x].Jump = 1;
        if (!Have(&#39;D&#39;, t))
        &#123;
            #ifdef Log
                printf(&quot;Pig %d not have %c\n&quot;, t, &#39;D&#39;);
            #endif // Log
            Pig::Pig[t].Strength--;
            #ifdef Log
            printf(&quot;Pig %d HP = %d\n&quot;, t, Pig::Pig[t].Strength);
            #endif // Log
            if (Pig::Pig[t].Strength == 0)
            &#123;
                if (!Have(&#39;P&#39;, t))
                &#123;
                    #ifdef Log
                    printf(&quot;Pig %d Died\n&quot;, t);
                    #endif // Log
                    Pig::Died[t] = 1;
                    memset(nxt, 0, sizeof (nxt));
                    if (Pig::Died[1] == 1) return;
                    if (Pig::Pig[t].Identity == 2 &amp;&amp; Pig::Pig[x].Identity == 1) 
                    &#123;
                        Pig::Pig[x].Card.clear(), Pig::Pig[x].Equipped = 0;
                        Z_D_to_M = 1;
                    &#125;
                    if (Pig::Pig[t].Identity == 3) 
                    &#123;
                        D_F++;
                        if (D_F == T) return;
                        Get_Card(x, 3);
                    &#125;
                &#125;
                else
                    Pig::Pig[t].Strength = 1;
            &#125;
        &#125;
        return;
    &#125;
    else if (c == &#39;P&#39;)
        return Pig::Pig[x].Strength++, void(0);
    else if (c == &#39;F&#39;)
    &#123;
        #ifdef Log
            printf(&quot;Pig %d use %c to %d\n&quot;, x, c, t);
        #endif
        Pig::Pig[x].Jump = 1, Pig::Pig[x].Similar = 0;
        if (Pig::Pig[x].Identity == 1 &amp;&amp; Pig::Pig[t].Identity == 2) 
        &#123;
            Pig::Pig[t].Strength--;
            #ifdef Log
            printf(&quot;Pig %d HP = %d\n&quot;, t, Pig::Pig[t].Strength);
            #endif // Log
            if (Pig::Pig[t].Strength == 0)
            &#123;
                if (!Have(&#39;P&#39;, t))
                &#123;
                    #ifdef Log
                    printf(&quot;Pig %d Died\n&quot;, t);
                    #endif // Log
                    Pig::Died[t] = 1;
                    memset(nxt, 0, sizeof (nxt));
                    if (Pig::Died[1] == 1) return;
                    if (Pig::Pig[t].Identity == 2 &amp;&amp; Pig::Pig[x].Identity == 1) 
                    &#123;
                        Pig::Pig[x].Card.clear(), Pig::Pig[x].Equipped = 0;
                        Z_D_to_M = 1;
                    &#125;
                    if (Pig::Pig[t].Identity == 3) 
                    &#123;
                        D_F++;
                        if (D_F == T) return;
                        Get_Card(t, 3);
                    &#125;
                &#125;
                else
                    Pig::Pig[t].Strength = 1;
            &#125;
            return;
        &#125;
        if (Okforwuxie(x, t)) return void(0);
        while (1)
        &#123;
            if (!Have(&#39;K&#39;, t)) 
            &#123;
                Pig::Pig[t].Strength--;
                #ifdef Log
                printf(&quot;Pig %d HP = %d\n&quot;, t, Pig::Pig[t].Strength);
                #endif // Log
                if (Pig::Pig[t].Strength == 0)
                &#123;
                    if (!Have(&#39;P&#39;, t))
                    &#123;
                        #ifdef Log
                        printf(&quot;Pig %d Died\n&quot;, t);
                        #endif // Log
                        Pig::Died[t] = 1;
                        memset (nxt, 0, sizeof (nxt));
                        if (Pig::Died[1] == 1) return;
                        if (Pig::Pig[t].Identity == 2 &amp;&amp; Pig::Pig[x].Identity == 1) 
                        &#123;
                            Pig::Pig[x].Card.clear(), Pig::Pig[x].Equipped = 0;
                            Z_D_to_M = 1;
                        &#125;
                        if (Pig::Pig[t].Identity == 3) 
                        &#123;
                            D_F++;
                            if (D_F == T) return;
                            Get_Card(x, 3);
                        &#125;
                    &#125;
                    else
                        Pig::Pig[t].Strength = 1;
                &#125;
                return;
            &#125;
            if (!Have(&#39;K&#39;, x))
            &#123;
                Pig::Pig[x].Strength--;
                #ifdef Log
                printf(&quot;Pig %d HP = %d\n&quot;, x, Pig::Pig[x].Strength);
                #endif // Log
                if (Pig::Pig[x].Strength == 0)
                &#123;
                    if (!Have(&#39;P&#39;, x))
                    &#123;
                        #ifdef Log
                        printf(&quot;Pig %d Died\n&quot;, x);
                        #endif // Log
                        Pig::Died[x] = 1;
                        memset (nxt, 0, sizeof (nxt));
                        if (Pig::Died[1] == 1) return;
                        if (Pig::Pig[x].Identity == 2 &amp;&amp; Pig::Pig[t].Identity == 1) 
                        &#123;
                            Pig::Pig[t].Card.clear(), Pig::Pig[t].Equipped = 0;
                            Z_D_to_M = 1;
                        &#125;
                        if (Pig::Pig[x].Identity == 3) 
                        &#123;
                            D_F++;
                            if (D_F == T) return;
                            Get_Card(t, 3);
                            return;
                        &#125;
                    &#125;
                    else
                        Pig::Pig[x].Strength = 1;
                &#125;
                return;
            &#125;
        &#125;
    &#125;
    else if (c == &#39;N&#39;)
    &#123;
        #ifdef Log
        printf(&quot;Pig %d use %c to %d\n&quot;, x, c, t);
        #endif
        int Next_Pig = next(x);
        do
        &#123;
            if (Okforwuxie(x, Next_Pig)) goto END1;
            if (!Have(&#39;K&#39;, Next_Pig))
            &#123;
                Pig::Pig[Next_Pig].Strength--;
                #ifdef Log
                printf(&quot;Pig %d HP = %d\n&quot;, Next_Pig, Pig::Pig[Next_Pig].Strength);
                #endif // Log
                if (Pig::Pig[Next_Pig].Strength == 0)
                &#123;
                    if (!Have(&#39;P&#39;, Next_Pig))
                    &#123;
                        #ifdef Log
                        printf(&quot;Pig %d Died\n&quot;, Next_Pig);
                        #endif // Log
                        memset (nxt, 0, sizeof (nxt));
                        Pig::Died[Next_Pig] = 1;
                        if (Pig::Died[1] == 1) return;
                        if (Pig::Pig[Next_Pig].Identity == 2 &amp;&amp; Pig::Pig[x].Identity == 1) 
                        &#123;
                            Pig::Pig[x].Card.clear(), Pig::Pig[x].Equipped = 0;
                            Z_D_to_M = 1;
                        &#125;
                        if (Pig::Pig[Next_Pig].Identity == 3) 
                        &#123;
                            D_F++;
                            if (D_F == T) return;
                            Get_Card(x, 3);
                        &#125;
                    &#125;
                    else
                        Pig::Pig[Next_Pig].Strength = 1;
                &#125;
                if (Pig::Pig[Next_Pig].Identity == 1 &amp;&amp; Pig::Pig[x].Jump == 0) Pig::Pig[x].Similar = 1;
            &#125;
            END1:Next_Pig = next(Next_Pig);
        &#125;while (Next_Pig != x);
        return;
    &#125;
    else if (c == &#39;W&#39;)
    &#123;
        #ifdef Log
        printf(&quot;Pig %d use %c to %d\n&quot;, x, c, t);
        #endif
        int Next_Pig = next(x);
        do
        &#123;
            if (Okforwuxie(x, Next_Pig)) goto END2;
            if (!Have(&#39;D&#39;, Next_Pig))
            &#123;
                Pig::Pig[Next_Pig].Strength--;
                #ifdef Log
                printf(&quot;Pig %d HP = %d\n&quot;, Next_Pig, Pig::Pig[Next_Pig].Strength);
                #endif // Log
                if (Pig::Pig[Next_Pig].Strength == 0)
                &#123;
                    if (!Have(&#39;P&#39;, Next_Pig))
                    &#123;
                        #ifdef Log
                        printf(&quot;Pig %d Died\n&quot;, Next_Pig);
                        #endif // Log
                        Pig::Died[Next_Pig] = 1;
                        memset (nxt, 0, sizeof (nxt));
                        if (Pig::Died[1] == 1) return;
                        if (Pig::Pig[Next_Pig].Identity == 2 &amp;&amp; Pig::Pig[x].Identity == 1) 
                        &#123;
                            Pig::Pig[x].Card.clear(), Pig::Pig[x].Equipped = 0;
                            Z_D_to_M = 1;
                        &#125;
                        if (Pig::Pig[Next_Pig].Identity == 3) 
                        &#123;
                            D_F++;
                            if (D_F == T) return;
                            Get_Card(x, 3);
                        &#125;
                    &#125;
                    else
                        Pig::Pig[Next_Pig].Strength = 1;
                &#125;
                if (Pig::Pig[Next_Pig].Identity == 1 &amp;&amp; Pig::Pig[x].Jump == 0) Pig::Pig[x].Similar = 1;
            &#125;
            END2:Next_Pig = next(Next_Pig);
        &#125;while (Next_Pig != x);
        return;
    &#125;
    else if (c == &#39;Z&#39;)
        return Pig::Pig[x].Equipped = 1, void(0);
&#125;
void Use(int x, char c, int t)
&#123;
    UseM(x, c, t);
    // printf(&quot;ERROR in Use at Identity, There is no Id in the Pig\n&quot;);
&#125;
void Play(int x)
&#123;
    it = Pig::Pig[x].Card.begin();
    int K_Num = 0;
    int Y = D_F;
    for (; it != Pig::Pig[x].Card.end(); it = it2)
    &#123;
        int t = 0;
        if (Judge(x, *it, K_Num, t))
        &#123;
            #ifdef Log
                printf(&quot;Pig %d Used %c to %d\n&quot;, x, *it, t);
            #endif
            Use(x, *it, t);
            if (Z_D_to_M) return;
            if (*it == &#39;K&#39;) K_Num++;
            Pig::Pig[x].Card.erase(it);
            it2 = Pig::Pig[x].Card.begin();
            if (Pig::Died[1] == 1 || Pig::Died[x] == 1 || D_F == T) return;
        &#125;
        else
        &#123;
            it2 = it;
            it2++;
        &#125;
    &#125;
&#125;
void Run()
&#123;
    int now = 1, W = 0;
    while (!Over(W))
    &#123;
    #ifdef Log
        printf(&quot;It is %d Paly, It&#39;s Identity is %d &quot;, now, Pig::Pig[now].Identity);
        if (Pig::Pig[now].Jump == 1)
            printf(&quot;He Jumped\n&quot;);
        else
            printf(&quot;He not Jumped\n&quot;);
    #endif // Log
        Get_Card(now, 2);
    #ifdef Log
        printf(&quot;He has &quot;);
        Pig::Pig[now].Print();
    #endif
        Play(now);
        Z_D_to_M = 0;
        now = next(now);
    &#125;
    if (W == 0)
    &#123;
        printf (&quot;MP\n&quot;);
        for (int i = 1; i &lt;= n; i++)
        &#123;
            if (Pig::Died[i])
                printf(&quot;DEAD\n&quot;);
            else
                Pig::Pig[i].Print(i);
        &#125;
    &#125;
    else
    &#123;
        printf (&quot;FP\n&quot;);
        for (int i = 1; i &lt;= n; i++)
        &#123;
            if (Pig::Died[i])
                printf(&quot;DEAD\n&quot;);
            else
                Pig::Pig[i].Print(i);
        &#125;
    &#125;
&#125;
&#125;
int main()
&#123;
    // freopen(&quot;kopk10.in&quot;, &quot;r&quot;, stdin);
    // freopen(&quot;1.out&quot;, &quot;w&quot;, stdout);
#ifdef Log
    printf(&quot;======================================\n Start\n======================================\n&quot;);
#endif
    Main::Read_init();
#ifdef Log
    printf(&quot;Read Success\n\n&quot;);
    printf(&quot;======================================\nGame Start\n\n&quot;);
#endif
    Main::Run();
&#125;
</code></pre></div><div class="additional-content-after-post"><strong>本文作者 : NekoMio</strong><br><strong><a rel="license noopener" target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议</a>进行许可。</strong><br><strong>本文链接 : <a href="https://www.nekomio.com/2017/10/10/113/" target="_blank">https://www.nekomio.com/2017/10/10/113/</a></strong></div><div class="post-tags"><i class="fa fa-tags" aria-hidden="true"></i> <a class="tag badge badge-secondary post-meta-detail-tag -none-link" href="/tags/%E6%A8%A1%E6%8B%9F/" rel="tag">模拟</a></div></article><div id="share_container"><div id="share" data-initialized="true"><a class="no-pjax icon-wechat" tooltip="分享到微信"><button class="btn btn-icon btn-success"><span class="btn-inner--icon"><i class="fa fa-weixin"></i></span></button> </a><a target="_blank" class="no-pjax icon-douban" tooltip="分享到豆瓣"><button class="btn btn-icon btn-primary" style="background:#209261;border:none">豆</button> </a><a target="_blank" class="no-pjax icon-qq" tooltip="分享到 QQ"><button class="btn btn-icon btn-primary" style="background:#2196f3;border:none"><span class="btn-inner--icon"><i class="fa fa-qq"></i></span></button> </a><a target="_blank" class="no-pjax icon-qzone" tooltip="分享到 QQ 空间"><button class="btn btn-icon btn-primary" style="background:#ffc107;border:none"><span class="btn-inner--icon"><i class="fa fa-star"></i></span></button> </a><a target="_blank" class="no-pjax icon-weibo" tooltip="分享到微博"><button class="btn btn-icon btn-warning"><span class="btn-inner--icon"><i class="fa fa-weibo"></i></span></button> </a><a target="_blank" class="no-pjax icon-facebook" tooltip="分享到 Facebook"><button class="btn btn-icon btn-primary" style="background:#283593;border:none"><span class="btn-inner--icon"><i class="fa fa-facebook"></i></span></button> </a><a target="_blank" class="no-pjax icon-twitter" tooltip="分享到 Twitter"><button class="btn btn-icon btn-primary" style="background:#03a9f4;border:none"><span class="btn-inner--icon"><i class="fa fa-twitter"></i></span></button> </a><a target="_blank" class="no-pjax icon-telegram" href="https://telegram.me/share/url?url=https://www.nekomio.com/2017/10/10/113/&text=BZOJ 1972 [Sdoi2010]猪国杀" tooltip="分享到 Telegram"><button class="btn btn-icon btn-primary" style="background:#42a5f5;border:none"><span class="btn-inner--icon"><i class="fa fa-telegram"></i></span></button> </a><a target="_blank" class="no-pjax icon-copy-link" id="share_copy_link" tooltip="复制链接"><button class="btn btn-icon btn-default"><span class="btn-inner--icon"><i class="fa fa-link"></i></span></button></a></div><button id="share_show" class="btn btn-icon btn-primary" tooltip="分享"><span class="btn-inner--icon"><i class="fa fa-share"></i></span></button></div><script>socialShare("#share", {
	    title : 'BZOJ 1972 [Sdoi2010]猪国杀',
	    description : "\n概述

《猪国杀》是一种多猪牌类回合制游戏，一共有三种角色：主猪，忠猪，反猪。
每局游戏主猪有且只...",
	    wechatQrcodeTitle : "分享到微信",
	    wechatQrcodeHelper : '微信扫描二维码',
	    source : 'https://www.nekomio.com/2017/10/10/113/'
	});
	$("#share_show")[0].onclick = function(){
		$("#share_container").addClass("opened");
	};
	$("#share_copy_link")[0].onclick = function(){
		let input = document.createElement('input');
		document.body.appendChild(input);
		input.setAttribute("value", window.location.href);
		input.setAttribute("readonly", "readonly");
		input.setAttribute("style", "opacity: 0;mouse-events:none;");
		input.select();
		if (document.execCommand('copy')){
			iziToast.show({
				title: '链接已复制',
				message: "链接已复制到剪贴板",
				class: 'shadow',
				position: 'topRight',
				backgroundColor: '#2dce89',
				titleColor: '#ffffff',
				messageColor: '#ffffff',
				iconColor: '#ffffff',
				progressBarColor: '#ffffff',
				icon: 'fa fa-check',
				timeout: 5000
			});
		}else{
			iziToast.show({
				title: '复制失败',
				message: "请手动复制链接",
				class: 'shadow',
				position: 'topRight',
				backgroundColor: '#f5365c',
				titleColor: '#ffffff',
				messageColor: '#ffffff',
				iconColor: '#ffffff',
				progressBarColor: '#ffffff',
				icon: 'fa fa-close',
				timeout: 5000
			});
		}
		document.body.removeChild(input);
	};</script><div id="post_comment" class="card shadow-sm"><div id="waline"></div><script>function loadWaline(){argonConfig.waline=Waline.init({el:"#waline",locale:{placeholder:"评论经过人工审核后可见(Comment are visible after manual review)"},path:window.location.pathname,pageSize:"10",wordLimit:250,lang:"zh-cn",serverURL:"https://comment.nekomio.com",emoji:["//unpkg.com/@waline/emojis@1.1.0/weibo","//unpkg.com/@waline/emojis@1.1.0/bilibili"]})}function destroyWaline(){argonConfig.waline&&(argonConfig.waline.destroy(),argonConfig.waline=null)}</script></div><div class="post-navigation card shadow-sm"><div class="post-navigation-item post-navigation-pre"><span class="page-navigation-extra-text"><i class="fa fa-arrow-circle-o-left" aria-hidden="true"></i>上一篇</span><a href="/2017/10/21/114/" rel="prev"> BZOJ 2064 分裂 状压DP</a></div><div class="post-navigation-item post-navigation-next"><span class="page-navigation-extra-text">下一篇 <i class="fa fa-arrow-circle-o-right" aria-hidden="true"></i></span><a href="/2017/10/01/112/" rel="next"> 集训小记</a></div></div><footer id="footer" class="site-footer card shadow-sm border-0"><a target="_blank" href="https://beian.miit.gov.cn/" rel="nofollow noopener noreferrer noopener">京ICP备19044785号-1</a><div>「<a target="_blank" rel="noopener" href="https://www.cloudflare.com/">Cloudflare Pages</a> 提供网站托管服务」</div><div>Theme <a target="_blank" rel="noopener" href="https://github.com/solstice23/hexo-theme-argon"><strong>Argon</strong></a> | Powered by Hexo</div><span id="busuanzi_container_site_uv">本站访客数 <span id="busuanzi_value_site_uv"></span> 人次</span></footer></main></div></div><script src="/argontheme.js"></script><link rel="stylesheet" href="//cdn.bootcdn.net/ajax/libs/KaTeX/0.16.0/katex.min.css"><script src="//cdn.bootcdn.net/ajax/libs/KaTeX/0.16.0/katex.min.js"></script><script src="//cdn.bootcdn.net/ajax/libs/KaTeX/0.16.0/contrib/auto-render.min.js"></script><script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1}]})})</script><script>var argonEnableCodeHighlight=!0</script><link rel="stylesheet" href="/assets/vendor/highlight/styles/vs2015.css"><noscript><style>article img.lazyload[src^="data:image/svg+xml;base64,PCEtLUFyZ29uTG9hZGluZy0tPg"]{display:none}.comment-item-text .comment-sticker.lazyload{display:none}</style></noscript></body></html>