/*!
* Clamp.js 0.5.1
*
* Copyright 2011-2013, Joseph Schmitt http://joe.sh
* Released under the WTFPL license
* http://sam.zoy.org/wtfpl/
*/
window.$clamp=function(e,t){t=t||{};var n,i=window,l={clamp:t.clamp||2,useNativeClamp:void 0===t.useNativeClamp||t.useNativeClamp,splitOnChars:t.splitOnChars||[".","-","–","—"," "],animate:t.animate||!1,truncationChar:t.truncationChar||"…",truncationHTML:t.truncationHTML},a=e.style,r=e.innerHTML,o=void 0!==e.style.webkitLineClamp,u=l.clamp,c=u.indexOf&&(u.indexOf("px")>-1||u.indexOf("em")>-1);function s(e,t){return i.getComputedStyle||(i.getComputedStyle=function(e,t){return this.el=e,this.getPropertyValue=function(t){var n=/(\-([a-z]){1})/g;return"float"==t&&(t="styleFloat"),n.test(t)&&(t=t.replace(n,(function(){return arguments[2].toUpperCase()}))),e.currentStyle&&e.currentStyle[t]?e.currentStyle[t]:null},this}),i.getComputedStyle(e,null).getPropertyValue(t)}function h(t){var n=t||e.clientHeight,i=p(e);return Math.max(Math.floor(n/i),0)}function p(e){var t=s(e,"line-height");return"normal"==t&&(t=1.2*parseInt(s(e,"font-size"))),parseInt(t)}l.truncationHTML&&((n=document.createElement("span")).innerHTML=l.truncationHTML);var d,C,m,f,v=l.splitOnChars.slice(0),g=v[0];function y(t){return t.lastChild.children&&t.lastChild.children.length>0?y(Array.prototype.slice.call(t.children).pop()):t.lastChild&&t.lastChild.nodeValue&&""!=t.lastChild.nodeValue&&t.lastChild.nodeValue!=l.truncationChar?t.lastChild:(t.lastChild.parentNode.removeChild(t.lastChild),y(e))}function H(e,t){e.nodeValue=t+l.truncationChar}if("auto"==u?u=h():c&&(u=h(parseInt(u))),o&&l.useNativeClamp)a.overflow="hidden",a.textOverflow="ellipsis",a.webkitBoxOrient="vertical",a.display="-webkit-box",a.webkitLineClamp=u,c&&(a.height=l.clamp+"px");else{var L=(f=u,p(e)*f);L<=e.clientHeight&&(m=function t(i,a){if(a){var r=i.nodeValue.replace(l.truncationChar,"");if(d||(g=v.length>0?v.shift():"",d=r.split(g)),d.length>1?(C=d.pop(),H(i,d.join(g))):d=null,n&&(i.nodeValue=i.nodeValue.replace(l.truncationChar,""),e.innerHTML=i.nodeValue+" "+n.innerHTML+l.truncationChar),d){if(e.clientHeight<=a){if(!(v.length>=0&&""!=g))return e.innerHTML;H(i,d.join(g)+g+C),d=null}}else""==g&&(H(i,""),i=y(e),v=l.splitOnChars.slice(0),g=v[0],d=null,C=null);if(!l.animate)return t(i,a);setTimeout((function(){t(i,a)}),!0===l.animate?10:l.animate)}}(y(e),L))}return{original:r,clamped:m}};